{"ast":null,"code":"var _jsxFileName = \"/home/oem/ServiceOfTutorials/frontend/src/ArticleCreator.js\";\nimport React, { Component } from 'react';\nimport Service from './Service';\nimport editPNG from \"./img/edit.png\";\nimport trashPNG from \"./img/trash.png\";\nimport append from \"./img/plus.png\";\nconst service = new Service();\n\nclass ArticleCreator extends Component {\n  constructor(props) {\n    super(props);\n    this.deleteElement = this.deleteElement.bind(this);\n    this.appendElement = this.appendElement.bind(this);\n    this.temp_type_change = this.temp_type_change.bind(this);\n    this.publicateArticle = this.publicateArticle.bind(this);\n    this.state = {\n      article: [],\n      status: null,\n      edit: null,\n      temp_type: null\n    };\n  }\n\n  styleOfArticle(key) {\n    if (!key) {} else if (key[1] === \"code\") {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: key,\n        className: \"article__code\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 16\n        }\n      }, key[0]);\n    } else if (key[1] === \"text\") {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: key,\n        className: \"article__text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 15\n        }\n      }, key[0]);\n    } else if (key[1] === \"link\") {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: key,\n        className: \"article__link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        href: key[2],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 17\n        }\n      }, \" \", key[0]));\n    } else if (key[1] === \"header\") {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: key,\n        className: \"article__header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 15\n        }\n      }, key[0]);\n    }\n  }\n\n  deleteElement(id) {\n    this.setState(({\n      article\n    }) => {\n      const newArray = [...article.slice(0, id), ...article.slice(id + 1)];\n      return {\n        article: newArray\n      };\n    });\n  }\n\n  editElement(id) {\n    this.setState({\n      edit: this.state.article[id],\n      status: \"edit\",\n      temp_type: this.state.article[id][1]\n    });\n  }\n\n  appendElement(id) {\n    if (id !== -2) {\n      this.setState({\n        edit: this.state.article[id],\n        status: \"append\",\n        temp_type: null\n      });\n    } else {\n      this.setState({\n        edit: [],\n        status: \"append\",\n        temp_type: null\n      });\n    }\n  }\n\n  addBlock(id) {\n    console.log(id);\n    let type = this.state.temp_type;\n    let textFromForm = document.getElementById(\"textInputFromRedaction\").value;\n    let arr = this.state.article;\n    console.log(arr);\n    let temp_arr = [];\n    console.log(type);\n\n    if (type !== \"selected\" && document.getElementById(\"textInputFromRedaction\").value !== \"\") {\n      if (type === \"link\") {\n        let link = document.getElementById(\"linkInputFromRedaction\").value;\n        temp_arr = [textFromForm, type, link];\n        document.getElementById(\"linkInputFromRedaction\").value = \"\";\n      } else {\n        temp_arr = [textFromForm, type];\n      }\n\n      if (-1 !== id) {\n        arr = [...arr.slice(0, id), ...[temp_arr], ...arr.slice(id)];\n      } else {\n        arr.push(temp_arr);\n      }\n\n      document.getElementById(\"textInputFromRedaction\").value = \"\";\n      this.setState({\n        article: arr,\n        status: null\n      });\n      console.log(arr);\n    } else if (!type || type === \"selected\") {\n      alert(\"Укажите тип блока\");\n    } else if (!textFromForm || textFromForm === \"\") {\n      alert(\"Заполните пожалуйста все поля\");\n    }\n  }\n\n  redactionBlock(id) {\n    console.log(id);\n    let type = this.state.temp_type;\n    let textFromForm = document.getElementById(\"textInputFromRedaction\").value;\n    let arr = this.state.article;\n    console.log(type);\n\n    if (type !== \"selected\" && document.getElementById(\"textInputFromRedaction\").value !== \"\") {\n      if (type === \"link\") {\n        let link = document.getElementById(\"linkInputFromRedaction\").value;\n        arr[id] = [textFromForm, type, link];\n        document.getElementById(\"linkInputFromRedaction\").value = \"\";\n      } else {\n        arr[id] = [textFromForm, type];\n      }\n\n      document.getElementById(\"textInputFromRedaction\").value = \"\";\n      this.setState({\n        article: arr,\n        status: null\n      });\n    } else if (!type || type === \"selected\") {\n      alert(\"Укажите тип блока\");\n    } else if (!textFromForm || textFromForm === \"\") {\n      alert(\"Заполните пожалуйста все поля\");\n    }\n  }\n\n  styleOfRedactionInput(moment) {\n    if (this.state.temp_type === \"link\") {\n      return \"create-article__type-new-block-link form-control create-article__input\";\n    } else {\n      return \"create-article__non-display\";\n    }\n  }\n\n  temp_type_change(event) {\n    this.setState({\n      temp_type: event.target.value\n    });\n  }\n\n  publicateArticle() {\n    if (this.state.article[0][1] !== \"header\") {\n      alert(\"Статья должна начинаться с Заголовока\");\n    } else {\n      this.setState({\n        loading: true\n      });\n      var self = this;\n      var raw = {\n        \"type\": this.props.type,\n        \"under_type\": this.props.under_type.toString(),\n        \"article\": this.state.article\n      };\n      service.createArticle(raw).then(function (result) {\n        self.setState({\n          loading: false\n        });\n        alert(\"Статья добавлена, и на ходится на модерации,спасибо, удачного дня!)\");\n        window.location.reload();\n      });\n    }\n  }\n\n  render() {\n    if (this.state.status === \"edit\") {\n      let moment = this.state.edit;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"article__container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 9\n        }\n      }, this.styleOfArticle(moment), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }\n      }, \" \\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"create-article__choose-type custom-select mr-sm-2 create-article__input\",\n        id: \"inlineFormCustomSelect\",\n        onChange: this.temp_type_change,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"selected\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }\n      }, \"\\u0422\\u0438\\u043F \\u0431\\u043B\\u043E\\u043A\\u0430\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }\n      }, \"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }\n      }, \"\\u0422\\u0435\\u043A\\u0441\\u0442\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"code\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }\n      }, \"\\u041A\\u043E\\u0434\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }\n      }, \"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430\")), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control create-article__input\",\n        id: \"textInputFromRedaction\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        className: this.styleOfRedactionInput(moment),\n        id: \"linkInputFromRedaction\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"create-article__create-button\",\n        onClick: () => this.redactionBlock(this.state.article.indexOf(moment)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }\n      }, \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0431\\u043B\\u043E\\u043A\"));\n    } else if (this.state.status === \"append\") {\n      let moment = this.state.edit;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"article__container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 9\n        }\n      }, this.styleOfArticle(moment), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }\n      }, \" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"create-article__choose-type custom-select mr-sm-2 create-article__input\",\n        id: \"inlineFormCustomSelect\",\n        onChange: this.temp_type_change,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"selected\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }\n      }, \"\\u0422\\u0438\\u043F \\u0431\\u043B\\u043E\\u043A\\u0430\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }\n      }, \"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }\n      }, \"\\u0422\\u0435\\u043A\\u0441\\u0442\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"code\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }\n      }, \"\\u041A\\u043E\\u0434\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }\n      }, \"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430\")), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control create-article__input\",\n        id: \"textInputFromRedaction\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        className: this.styleOfRedactionInput(moment),\n        id: \"linkInputFromRedaction\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"create-article__create-button\",\n        onClick: () => this.addBlock(this.state.article.indexOf(moment)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }\n      }, \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0431\\u043B\\u043E\\u043A\"));\n    } else return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"article__container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 7\n      }\n    }, this.state.article.map(moment => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"article__appendButton\",\n      onClick: () => this.appendElement(this.state.article.indexOf(moment)),\n      alt: \"plus\",\n      src: append,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 15\n      }\n    }), this.styleOfArticle(moment), /*#__PURE__*/React.createElement(\"img\", {\n      className: \"article__delButton\",\n      alt: \"delete\",\n      onClick: () => this.deleteElement(this.state.article.indexOf(moment)),\n      src: trashPNG,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      className: \"article__editButton\",\n      alt: \"edit\",\n      onClick: () => this.editElement(this.state.article.indexOf(moment)),\n      src: editPNG,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"img\", {\n      className: \"article__appendButton\",\n      onClick: () => this.appendElement(-2),\n      alt: \"plus\",\n      src: append,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"create-article__uppend-button\",\n      onClick: this.publicateArticle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 11\n      }\n    }, \"\\u041E\\u043F\\u0443\\u0431\\u043B\\u0438\\u043A\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u0442\\u0430\\u0442\\u044C\\u044E\"));\n  }\n\n}\n\nexport default ArticleCreator;","map":{"version":3,"sources":["/home/oem/ServiceOfTutorials/frontend/src/ArticleCreator.js"],"names":["React","Component","Service","editPNG","trashPNG","append","service","ArticleCreator","constructor","props","deleteElement","bind","appendElement","temp_type_change","publicateArticle","state","article","status","edit","temp_type","styleOfArticle","key","id","setState","newArray","slice","editElement","addBlock","console","log","type","textFromForm","document","getElementById","value","arr","temp_arr","link","push","alert","redactionBlock","styleOfRedactionInput","moment","event","target","loading","self","raw","under_type","toString","createArticle","then","result","window","location","reload","render","indexOf","map"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAkC,OAAlC;AAEA,OAAQC,OAAR,MAAuB,WAAvB;AAEA,OAAQC,OAAR,MAAqB,gBAArB;AACA,OAAQC,QAAR,MAAsB,iBAAtB;AACA,OAAQC,MAAR,MAAoB,gBAApB;AAEA,MAAOC,OAAO,GAAK,IAAKJ,OAAL,EAAnB;;AAEA,MAAMK,cAAN,SAA6BN,SAA7B,CAAsC;AAEpCO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBD,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKE,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBF,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKG,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBH,IAAtB,CAA2B,IAA3B,CAAxB;AAEA,SAAKI,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAG,EADC;AAEXC,MAAAA,MAAM,EAAE,IAFG;AAGXC,MAAAA,IAAI,EAAE,IAHK;AAIXC,MAAAA,SAAS,EAAE;AAJA,KAAb;AAMD;;AAKDC,EAAAA,cAAc,CAACC,GAAD,EAAM;AAClB,QAAG,CAACA,GAAJ,EAAQ,CAEP,CAFD,MAEO,IAAIA,GAAG,CAAC,CAAD,CAAH,KAAW,MAAf,EAAuB;AAC5B,0BAAS;AAAK,QAAA,GAAG,EAAEA,GAAV;AAAe,QAAA,SAAS,EAAC,eAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACEA,GAAG,CAAC,CAAD,CADL,CAAT;AAGD,KAJM,MAIA,IAAGA,GAAG,CAAC,CAAD,CAAH,KAAW,MAAd,EAAqB;AAC1B,0BAAQ;AAAK,QAAA,GAAG,EAAEA,GAAV;AAAe,QAAA,SAAS,EAAC,eAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGA,GAAG,CAAC,CAAD,CADN,CAAR;AAGD,KAJM,MAIA,IAAGA,GAAG,CAAC,CAAD,CAAH,KAAW,MAAd,EAAqB;AAC1B,0BAAQ;AAAK,QAAA,GAAG,EAAEA,GAAV;AAAe,QAAA,SAAS,EAAC,eAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,QAAA,IAAI,EAAEA,GAAG,CAAC,CAAD,CAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAmBA,GAAG,CAAC,CAAD,CAAtB,CADF,CAAR;AAGD,KAJM,MAIA,IAAGA,GAAG,CAAC,CAAD,CAAH,KAAW,QAAd,EAAuB;AAC5B,0BAAQ;AAAK,QAAA,GAAG,EAAEA,GAAV;AAAe,QAAA,SAAS,EAAC,iBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGA,GAAG,CAAC,CAAD,CADN,CAAR;AAGD;AACF;;AACDX,EAAAA,aAAa,CAACY,EAAD,EAAK;AAChB,SAAKC,QAAL,CAAc,CAAC;AAAEP,MAAAA;AAAF,KAAD,KAAiB;AAE7B,YAAMQ,QAAQ,GAAG,CACf,GAAGR,OAAO,CAACS,KAAR,CAAc,CAAd,EAAiBH,EAAjB,CADY,EAEf,GAAGN,OAAO,CAACS,KAAR,CAAcH,EAAE,GAAG,CAAnB,CAFY,CAAjB;AAKA,aAAO;AACLN,QAAAA,OAAO,EAAEQ;AADJ,OAAP;AAGD,KAVD;AAWD;;AACDE,EAAAA,WAAW,CAACJ,EAAD,EAAK;AACd,SAAKC,QAAL,CAAc;AACZL,MAAAA,IAAI,EAAE,KAAKH,KAAL,CAAWC,OAAX,CAAmBM,EAAnB,CADM;AAEZL,MAAAA,MAAM,EAAE,MAFI;AAGZE,MAAAA,SAAS,EAAE,KAAKJ,KAAL,CAAWC,OAAX,CAAmBM,EAAnB,EAAuB,CAAvB;AAHC,KAAd;AAKD;;AACDV,EAAAA,aAAa,CAACU,EAAD,EAAK;AAChB,QAAGA,EAAE,KAAK,CAAC,CAAX,EAAc;AACZ,WAAKC,QAAL,CAAc;AACZL,QAAAA,IAAI,EAAE,KAAKH,KAAL,CAAWC,OAAX,CAAmBM,EAAnB,CADM;AAEZL,QAAAA,MAAM,EAAE,QAFI;AAGZE,QAAAA,SAAS,EAAE;AAHC,OAAd;AAKD,KAND,MAMO;AACL,WAAKI,QAAL,CAAc;AACZL,QAAAA,IAAI,EAAE,EADM;AAEZD,QAAAA,MAAM,EAAE,QAFI;AAGZE,QAAAA,SAAS,EAAE;AAHC,OAAd;AAKD;AAEF;;AACDQ,EAAAA,QAAQ,CAACL,EAAD,EAAK;AACXM,IAAAA,OAAO,CAACC,GAAR,CAAYP,EAAZ;AACA,QAAIQ,IAAI,GAAG,KAAKf,KAAL,CAAWI,SAAtB;AACA,QAAIY,YAAY,GAAGC,QAAQ,CAACC,cAAT,CAAwB,wBAAxB,EAAkDC,KAArE;AACA,QAAIC,GAAG,GAAG,KAAKpB,KAAL,CAAWC,OAArB;AACAY,IAAAA,OAAO,CAACC,GAAR,CAAYM,GAAZ;AACA,QAAIC,QAAQ,GAAG,EAAf;AACAR,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;;AACA,QAAIA,IAAI,KAAK,UAAT,IAAuBE,QAAQ,CAACC,cAAT,CAAwB,wBAAxB,EAAkDC,KAAlD,KAA4D,EAAvF,EAA2F;AACvF,UAAIJ,IAAI,KAAK,MAAb,EAAqB;AACnB,YAAIO,IAAI,GAAGL,QAAQ,CAACC,cAAT,CAAwB,wBAAxB,EAAkDC,KAA7D;AACAE,QAAAA,QAAQ,GAAG,CAACL,YAAD,EAAeD,IAAf,EAAqBO,IAArB,CAAX;AACAL,QAAAA,QAAQ,CAACC,cAAT,CAAwB,wBAAxB,EAAkDC,KAAlD,GAA0D,EAA1D;AACD,OAJD,MAIO;AACLE,QAAAA,QAAQ,GAAG,CAACL,YAAD,EAAeD,IAAf,CAAX;AACD;;AACD,UAAG,CAAC,CAAD,KAAOR,EAAV,EAAa;AACXa,QAAAA,GAAG,GAAG,CACJ,GAAGA,GAAG,CAACV,KAAJ,CAAU,CAAV,EAAaH,EAAb,CADC,EAEJ,GAAG,CAACc,QAAD,CAFC,EAGJ,GAAGD,GAAG,CAACV,KAAJ,CAAUH,EAAV,CAHC,CAAN;AAKD,OAND,MAMO;AACLa,QAAAA,GAAG,CAACG,IAAJ,CAASF,QAAT;AACD;;AAEDJ,MAAAA,QAAQ,CAACC,cAAT,CAAwB,wBAAxB,EAAkDC,KAAlD,GAA0D,EAA1D;AACA,WAAKX,QAAL,CAAc;AACZP,QAAAA,OAAO,EAAEmB,GADG;AAEZlB,QAAAA,MAAM,EAAE;AAFI,OAAd;AAIAW,MAAAA,OAAO,CAACC,GAAR,CAAYM,GAAZ;AACH,KAxBD,MAyBK,IAAI,CAACL,IAAD,IAASA,IAAI,KAAK,UAAtB,EAAiC;AACpCS,MAAAA,KAAK,CAAE,mBAAF,CAAL;AACD,KAFI,MAGA,IAAI,CAACR,YAAD,IAAiBA,YAAY,KAAK,EAAtC,EAA0C;AAC7CQ,MAAAA,KAAK,CAAC,+BAAD,CAAL;AACD;AACF;;AACDC,EAAAA,cAAc,CAAClB,EAAD,EAAK;AACjBM,IAAAA,OAAO,CAACC,GAAR,CAAYP,EAAZ;AACA,QAAIQ,IAAI,GAAG,KAAKf,KAAL,CAAWI,SAAtB;AACA,QAAIY,YAAY,GAAGC,QAAQ,CAACC,cAAT,CAAwB,wBAAxB,EAAkDC,KAArE;AACA,QAAIC,GAAG,GAAG,KAAKpB,KAAL,CAAWC,OAArB;AACAY,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;;AACA,QAAIA,IAAI,KAAK,UAAT,IAAuBE,QAAQ,CAACC,cAAT,CAAwB,wBAAxB,EAAkDC,KAAlD,KAA4D,EAAvF,EAA2F;AACvF,UAAIJ,IAAI,KAAK,MAAb,EAAqB;AACnB,YAAIO,IAAI,GAAGL,QAAQ,CAACC,cAAT,CAAwB,wBAAxB,EAAkDC,KAA7D;AACAC,QAAAA,GAAG,CAACb,EAAD,CAAH,GAAQ,CAACS,YAAD,EAAeD,IAAf,EAAqBO,IAArB,CAAR;AACAL,QAAAA,QAAQ,CAACC,cAAT,CAAwB,wBAAxB,EAAkDC,KAAlD,GAA0D,EAA1D;AACD,OAJD,MAIO;AACLC,QAAAA,GAAG,CAACb,EAAD,CAAH,GAAQ,CAACS,YAAD,EAAeD,IAAf,CAAR;AACD;;AACDE,MAAAA,QAAQ,CAACC,cAAT,CAAwB,wBAAxB,EAAkDC,KAAlD,GAA0D,EAA1D;AACA,WAAKX,QAAL,CAAc;AACZP,QAAAA,OAAO,EAAEmB,GADG;AAEZlB,QAAAA,MAAM,EAAE;AAFI,OAAd;AAIH,KAbD,MAcK,IAAI,CAACa,IAAD,IAASA,IAAI,KAAK,UAAtB,EAAiC;AACpCS,MAAAA,KAAK,CAAE,mBAAF,CAAL;AACD,KAFI,MAGA,IAAI,CAACR,YAAD,IAAiBA,YAAY,KAAK,EAAtC,EAA0C;AAC7CQ,MAAAA,KAAK,CAAC,+BAAD,CAAL;AACD;AACF;;AACDE,EAAAA,qBAAqB,CAACC,MAAD,EAAS;AAC5B,QAAG,KAAK3B,KAAL,CAAWI,SAAX,KAAyB,MAA5B,EAAmC;AACjC,aAAO,wEAAP;AACD,KAFD,MAEO;AACL,aAAO,6BAAP;AACD;AACF;;AACDN,EAAAA,gBAAgB,CAAC8B,KAAD,EAAQ;AACtB,SAAKpB,QAAL,CAAc;AAAEJ,MAAAA,SAAS,EAAEwB,KAAK,CAACC,MAAN,CAAaV;AAA1B,KAAd;AACD;;AAIDpB,EAAAA,gBAAgB,GAAE;AAEhB,QAAI,KAAKC,KAAL,CAAWC,OAAX,CAAmB,CAAnB,EAAsB,CAAtB,MAA6B,QAAjC,EAA2C;AACzCuB,MAAAA,KAAK,CAAC,uCAAD,CAAL;AACD,KAFD,MAEM;AACJ,WAAKhB,QAAL,CAAc;AAACsB,QAAAA,OAAO,EAAE;AAAV,OAAd;AACA,UAAKC,IAAI,GAAK,IAAd;AAEA,UAAIC,GAAG,GAAG;AACR,gBAAQ,KAAKtC,KAAL,CAAWqB,IADX;AAER,sBAAc,KAAKrB,KAAL,CAAWuC,UAAX,CAAsBC,QAAtB,EAFN;AAGR,mBAAW,KAAKlC,KAAL,CAAWC;AAHd,OAAV;AAKAV,MAAAA,OAAO,CAAC4C,aAAR,CAAsBH,GAAtB,EAA2BI,IAA3B,CAAgC,UAAUC,MAAV,EAAkB;AAChDN,QAAAA,IAAI,CAACvB,QAAL,CAAc;AAACsB,UAAAA,OAAO,EAAC;AAAT,SAAd;AACAN,QAAAA,KAAK,CAAC,qEAAD,CAAL;AACAc,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,OAJD;AAKD;AACF;;AAGDC,EAAAA,MAAM,GAAG;AACP,QAAG,KAAKzC,KAAL,CAAWE,MAAX,KAAsB,MAAzB,EAAgC;AAC9B,UAAIyB,MAAM,GAAG,KAAK3B,KAAL,CAAWG,IAAxB;AACA,0BACE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEC,KAAKE,cAAL,CAAoBsB,MAApB,CAFD,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHA,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4FAJF,eAKE;AAAQ,QAAA,SAAS,EAAC,yEAAlB;AACQ,QAAA,EAAE,EAAC,wBADX;AAEQ,QAAA,QAAQ,EAAE,KAAK7B,gBAFvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAGE;AAAQ,QAAA,KAAK,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6DAHF,eAIE;AAAQ,QAAA,KAAK,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kEAJF,eAKE;AAAQ,QAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CALF,eAME;AAAQ,QAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BANF,eAOE;AAAQ,QAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAPF,CALF,eAcE;AAAO,QAAA,SAAS,EAAC,oCAAjB;AAAsD,QAAA,EAAE,EAAC,wBAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAdF,eAeE;AAAO,QAAA,SAAS,EAAE,KAAK4B,qBAAL,CAA2BC,MAA3B,CAAlB;AAAsD,QAAA,EAAE,EAAC,wBAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAfF,eAgBE;AAAM,QAAA,SAAS,EAAC,+BAAhB;AACM,QAAA,OAAO,EAAE,MAAM,KAAKF,cAAL,CAAoB,KAAKzB,KAAL,CAAWC,OAAX,CAAmByC,OAAnB,CAA2Bf,MAA3B,CAApB,CADrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wJAhBF,CADF;AAuBD,KAzBD,MAyBO,IAAG,KAAK3B,KAAL,CAAWE,MAAX,KAAsB,QAAzB,EAAkC;AACvC,UAAIyB,MAAM,GAAG,KAAK3B,KAAL,CAAWG,IAAxB;AACA,0BACE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEC,KAAKE,cAAL,CAAoBsB,MAApB,CAFD,eAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHA,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8DAJF,eAKE;AAAQ,QAAA,SAAS,EAAC,yEAAlB;AACQ,QAAA,EAAE,EAAC,wBADX;AAEQ,QAAA,QAAQ,EAAE,KAAK7B,gBAFvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAGE;AAAQ,QAAA,KAAK,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6DAHF,eAIE;AAAQ,QAAA,KAAK,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kEAJF,eAKE;AAAQ,QAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CALF,eAME;AAAQ,QAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BANF,eAOE;AAAQ,QAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAPF,CALF,eAcE;AAAO,QAAA,SAAS,EAAC,oCAAjB;AAAsD,QAAA,EAAE,EAAC,wBAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAdF,eAeE;AAAO,QAAA,SAAS,EAAE,KAAK4B,qBAAL,CAA2BC,MAA3B,CAAlB;AAAsD,QAAA,EAAE,EAAC,wBAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAfF,eAgBE;AAAM,QAAA,SAAS,EAAC,+BAAhB;AACM,QAAA,OAAO,EAAE,MAAM,KAAKf,QAAL,CAAc,KAAKZ,KAAL,CAAWC,OAAX,CAAmByC,OAAnB,CAA2Bf,MAA3B,CAAd,CADrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wJAhBF,CADF;AAuBD,KAzBM,MAyBC,oBACN;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI,KAAK3B,KAAL,CAAWC,OAAX,CAAmB0C,GAAnB,CAAwBhB,MAAM,iBAC5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAC,uBADZ;AAEE,MAAA,OAAO,EAAE,MAAM,KAAK9B,aAAL,CAAmB,KAAKG,KAAL,CAAWC,OAAX,CAAmByC,OAAnB,CAA2Bf,MAA3B,CAAnB,CAFjB;AAGE,MAAA,GAAG,EAAC,MAHN;AAIE,MAAA,GAAG,EAAErC,MAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAMG,KAAKe,cAAL,CAAoBsB,MAApB,CANH,eAOE;AACE,MAAA,SAAS,EAAC,oBADZ;AAEE,MAAA,GAAG,EAAC,QAFN;AAGE,MAAA,OAAO,EAAE,MAAM,KAAKhC,aAAL,CAAmB,KAAKK,KAAL,CAAWC,OAAX,CAAmByC,OAAnB,CAA2Bf,MAA3B,CAAnB,CAHjB;AAIE,MAAA,GAAG,EAAEtC,QAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPF,eAYE;AACE,MAAA,SAAS,EAAC,qBADZ;AAEE,MAAA,GAAG,EAAC,MAFN;AAGE,MAAA,OAAO,EAAE,MAAM,KAAKsB,WAAL,CAAiB,KAAKX,KAAL,CAAWC,OAAX,CAAmByC,OAAnB,CAA2Bf,MAA3B,CAAjB,CAHjB;AAIE,MAAA,GAAG,EAAEvC,OAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAZF,CADF,CAFJ,eAuBQ;AACE,MAAA,SAAS,EAAC,uBADZ;AAEE,MAAA,OAAO,EAAE,MAAM,KAAKS,aAAL,CAAmB,CAAC,CAApB,CAFjB;AAGE,MAAA,GAAG,EAAC,MAHN;AAIE,MAAA,GAAG,EAAEP,MAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAvBR,eA4BI;AAAM,MAAA,SAAS,EAAC,+BAAhB;AACM,MAAA,OAAO,EAAE,KAAKS,gBADpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uHA5BJ,CADM;AAmCT;;AAzQmC;;AA4QtC,eAAeP,cAAf","sourcesContent":["import React, { Component }  from 'react';\n\nimport  Service  from  './Service';\n\nimport  editPNG from \"./img/edit.png\";\nimport  trashPNG from \"./img/trash.png\";\nimport  append from \"./img/plus.png\"\n\nconst  service  =  new  Service();\n\nclass ArticleCreator extends Component{\n\n  constructor(props) {\n    super(props);\n    this.deleteElement = this.deleteElement.bind(this)\n    this.appendElement = this.appendElement.bind(this)\n    this.temp_type_change = this.temp_type_change.bind(this)\n    this.publicateArticle = this.publicateArticle.bind(this)\n\n    this.state = {\n      article:  [],\n      status: null,\n      edit: null,\n      temp_type: null\n    };\n  }\n\n\n \n\n  styleOfArticle(key) {\n    if(!key){\n\n    } else if (key[1] === \"code\") {\n      return  (<div key={key} className=\"article__code\">\n                {key[0]}\n              </div>)\n    } else if(key[1] === \"text\"){\n      return (<div key={key} className=\"article__text\">\n                {key[0]}\n              </div>)\n    } else if(key[1] === \"link\"){\n      return (<div key={key} className=\"article__link\">\n                <a href={key[2]}> {key[0]}</a>\n              </div>)\n    } else if(key[1] === \"header\"){\n      return (<div key={key} className=\"article__header\">\n                {key[0]}\n              </div>)\n    }\n  }\n  deleteElement(id) {\n    this.setState(({ article }) => {\n\n      const newArray = [\n        ...article.slice(0, id),\n        ...article.slice(id + 1)\n      ];\n\n      return {\n        article: newArray\n      };\n    });\n  };\n  editElement(id) {\n    this.setState({\n      edit: this.state.article[id],\n      status: \"edit\",\n      temp_type: this.state.article[id][1]\n    })\n  }\n  appendElement(id) {\n    if(id !== -2 ){\n      this.setState({\n        edit: this.state.article[id],\n        status: \"append\",\n        temp_type: null\n      })\n    } else {\n      this.setState({\n        edit: [],\n        status: \"append\",\n        temp_type: null\n      })\n    }\n\n  }\n  addBlock(id) {\n    console.log(id)\n    let type = this.state.temp_type\n    let textFromForm = document.getElementById(\"textInputFromRedaction\").value\n    let arr = this.state.article\n    console.log(arr)\n    let temp_arr = []\n    console.log(type)\n    if (type !== \"selected\" && document.getElementById(\"textInputFromRedaction\").value !== \"\") {\n        if (type === \"link\") {\n          let link = document.getElementById(\"linkInputFromRedaction\").value\n          temp_arr = [textFromForm, type, link]\n          document.getElementById(\"linkInputFromRedaction\").value = \"\"\n        } else {\n          temp_arr = [textFromForm, type]\n        }\n        if(-1 !== id){\n          arr = [\n            ...arr.slice(0, id),\n            ...[temp_arr],\n            ...arr.slice(id )\n          ];\n        } else {\n          arr.push(temp_arr)\n        }\n\n        document.getElementById(\"textInputFromRedaction\").value = \"\"\n        this.setState({\n          article: arr,\n          status: null\n        })\n        console.log(arr)\n    } \n    else if (!type || type === \"selected\"){\n      alert (\"Укажите тип блока\")\n    } \n    else if (!textFromForm || textFromForm === \"\") {\n      alert(\"Заполните пожалуйста все поля\")\n    }\n  }\n  redactionBlock(id) {\n    console.log(id)\n    let type = this.state.temp_type\n    let textFromForm = document.getElementById(\"textInputFromRedaction\").value\n    let arr = this.state.article\n    console.log(type)\n    if (type !== \"selected\" && document.getElementById(\"textInputFromRedaction\").value !== \"\") {\n        if (type === \"link\") {\n          let link = document.getElementById(\"linkInputFromRedaction\").value\n          arr[id]=[textFromForm, type, link]\n          document.getElementById(\"linkInputFromRedaction\").value = \"\"\n        } else {\n          arr[id]=[textFromForm, type]\n        }\n        document.getElementById(\"textInputFromRedaction\").value = \"\"\n        this.setState({\n          article: arr,\n          status: null\n        })\n    } \n    else if (!type || type === \"selected\"){\n      alert (\"Укажите тип блока\")\n    } \n    else if (!textFromForm || textFromForm === \"\") {\n      alert(\"Заполните пожалуйста все поля\")\n    }\n  }\n  styleOfRedactionInput(moment) {\n    if(this.state.temp_type === \"link\"){\n      return \"create-article__type-new-block-link form-control create-article__input\"\n    } else {\n      return \"create-article__non-display\"\n    }\n  }\n  temp_type_change(event) {\n    this.setState({ temp_type: event.target.value })\n  }\n\n\n\n  publicateArticle(){\n\n    if (this.state.article[0][1] !== \"header\") {\n      alert(\"Статья должна начинаться с Заголовока\")\n    } else{\n      this.setState({loading: true})\n      var  self  =  this;\n\n      var raw = {\n        \"type\": this.props.type,\n        \"under_type\": this.props.under_type.toString(),\n        \"article\": this.state.article\n      }\n      service.createArticle(raw).then(function (result) {\n        self.setState({loading:false})\n        alert(\"Статья добавлена, и на ходится на модерации,спасибо, удачного дня!)\")\n        window.location.reload();\n      });\n    }\n  }\n\n\n  render() {\n    if(this.state.status === \"edit\"){\n      let moment = this.state.edit\n      return (\n        <div className=\"article__container\">\n\n        {this.styleOfArticle(moment)}\n        <br/>\n          <h3> Редактировать </h3>\n          <select className=\"create-article__choose-type custom-select mr-sm-2 create-article__input\" \n                  id=\"inlineFormCustomSelect\" \n                  onChange={this.temp_type_change}>\n            <option value=\"selected\">Тип блока</option>            \n            <option value=\"header\">Заголовок</option>\n            <option value=\"text\">Текст</option>\n            <option value=\"code\">Код</option>\n            <option value=\"link\">Ссылка</option>                                  \n          </select>\n          <input className=\"form-control create-article__input\" id=\"textInputFromRedaction\"/>\n          <input className={this.styleOfRedactionInput(moment)} id=\"linkInputFromRedaction\"/>\n          <div  className=\"create-article__create-button\"\n                onClick={() => this.redactionBlock(this.state.article.indexOf(moment))}> \n            Изменить заполненный блок\n          </div>                \n        </div> \n      )\n    } else if(this.state.status === \"append\"){\n      let moment = this.state.edit\n      return (\n        <div className=\"article__container\">\n\n        {this.styleOfArticle(moment)}\n        <br/>\n          <h3> Добавить </h3>\n          <select className=\"create-article__choose-type custom-select mr-sm-2 create-article__input\" \n                  id=\"inlineFormCustomSelect\" \n                  onChange={this.temp_type_change}>\n            <option value=\"selected\">Тип блока</option>            \n            <option value=\"header\">Заголовок</option>\n            <option value=\"text\">Текст</option>\n            <option value=\"code\">Код</option>\n            <option value=\"link\">Ссылка</option>                                  \n          </select>\n          <input className=\"form-control create-article__input\" id=\"textInputFromRedaction\"/>\n          <input className={this.styleOfRedactionInput(moment)} id=\"linkInputFromRedaction\"/>\n          <div  className=\"create-article__create-button\"\n                onClick={() => this.addBlock(this.state.article.indexOf(moment))}> \n            Изменить заполненный блок\n          </div>                \n        </div> \n      )\n    } else  return(\n      <div className=\"article__container\">\n        { \n          this.state.article.map( moment  =>\n            <div>\n              <img \n                className=\"article__appendButton\"\t      \t\t\n                onClick={() => this.appendElement(this.state.article.indexOf(moment))}\n                alt=\"plus\"\n                src={append}/>\n              {this.styleOfArticle(moment)}\n              <img \n                className=\"article__delButton\"     \n                alt=\"delete\"\n                onClick={() => this.deleteElement(this.state.article.indexOf(moment))}\n                src={trashPNG}/>\n              <img \n                className=\"article__editButton\"   \n                alt=\"edit\"\n                onClick={() => this.editElement(this.state.article.indexOf(moment))}\n                src={editPNG}/>   \n            </div>\n          )\n        }\n              <img \n                className=\"article__appendButton\"\t      \t\t\n                onClick={() => this.appendElement(-2)}\n                alt=\"plus\"\n                src={append}/>\n          <div  className=\"create-article__uppend-button\"\n                onClick={this.publicateArticle}> \n            Опубликовать статью \n          </div>\n      </div>\n    );\n  }\n}\n\nexport default ArticleCreator;\n"]},"metadata":{},"sourceType":"module"}