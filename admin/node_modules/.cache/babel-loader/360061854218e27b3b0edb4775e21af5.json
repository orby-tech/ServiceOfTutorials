{"ast":null,"code":"var _jsxFileName = \"/home/oem/ServiceOfTutorials/frontend/src/CreateArticle.tsx\";\nimport React, { Component } from 'react';\nimport Service from './Service';\nimport ArticleCreator from './ArticleCreator';\nimport { FirstSelect } from './CreateArticlesElements/firstSelect.tsx';\nimport { SecondSelect } from './CreateArticlesElements/SecondSelect.tsx';\nconst service = new Service();\n\nclass CreateArticle extends Component {\n  constructor(props) {\n    super(props);\n\n    this.first_change = title => {\n      let target;\n      console.log(title);\n\n      for (let i = 0; i < this.state.catalog.length; i++) {\n        if (title === this.state.catalog[i][0]) {\n          target = this.state.catalog[i].slice(1);\n          break;\n        }\n      }\n\n      this.setState({\n        second_steck: target,\n        first_value: title\n      });\n    };\n\n    this.second_change = title => {\n      this.setState({\n        second_value: title\n      });\n    };\n\n    this.first_change = this.first_change.bind(this);\n    this.second_change = this.second_change.bind(this);\n    let catalog = [];\n\n    if (localStorage.getItem('catalog')) {\n      catalog = JSON.parse(localStorage.getItem('catalog'));\n    }\n\n    this.state = {\n      catalog: catalog,\n      status: null,\n      first_value: \"\",\n      second_value: \"selected\",\n      second_steck: [],\n      type: \"selected\",\n      temp_type: \"selected\",\n      constructor: false,\n      new_article: [],\n      redaction: -1,\n      no_link: \"create-article__type-new-block-no-link form-control create-article__input\",\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    var self = this;\n    service.getCatalog().then(function (result) {\n      self.setState({\n        catalog: result,\n        loading: false\n      });\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      match: {\n        params\n      }\n    } = this.props;\n\n    if (params.pk !== this.state.opend) {\n      this.setState({\n        opend: params.pk\n      });\n    }\n  }\n\n  publicateArticle() {\n    if (this.state.new_article[0][1] !== \"header\") {\n      alert(\"Статья должна начинаться с Заголовока\");\n    } else {\n      this.setState({\n        loading: true\n      });\n      var self = this;\n      var raw = {\n        \"type\": this.state.first_value,\n        \"under_type\": this.state.second_value.toString(),\n        \"article\": this.state.new_article\n      };\n      service.createArticle(raw).then(function (result) {\n        self.setState({\n          loading: false\n        });\n        alert(\"Статья добавлена, и на ходится на модерации,спасибо, удачного дня!)\");\n        window.location.reload();\n      });\n    }\n  }\n\n  render() {\n    let styleOfCreatorBlock = this.state.second_value !== \"selected\" ? \"\" : \"create-article__non-display\";\n\n    if (this.state.loading) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cssload-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cssload-zenith\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }\n      })));\n    } else return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"create-article__container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(FirstSelect, {\n      catalog: this.state.catalog,\n      firstChange: this.first_change,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(SecondSelect, {\n      catalog: this.state.second_steck,\n      secondChange: this.second_change,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: styleOfCreatorBlock,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ArticleCreator, {\n      type: this.state.first_value,\n      under_type: this.state.second_value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    })));\n  }\n\n}\n\nexport default CreateArticle;","map":{"version":3,"sources":["/home/oem/ServiceOfTutorials/frontend/src/CreateArticle.tsx"],"names":["React","Component","Service","ArticleCreator","FirstSelect","SecondSelect","service","CreateArticle","constructor","props","first_change","title","target","console","log","i","state","catalog","length","slice","setState","second_steck","first_value","second_change","second_value","bind","localStorage","getItem","JSON","parse","status","type","temp_type","new_article","redaction","no_link","loading","componentDidMount","self","getCatalog","then","result","componentDidUpdate","prevProps","prevState","match","params","pk","opend","publicateArticle","alert","raw","toString","createArticle","window","location","reload","render","styleOfCreatorBlock"],"mappings":"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","sourcesContent":["import  React, { Component }  from 'react';\n\nimport  Service  from  './Service';\nimport  ArticleCreator  from  './ArticleCreator';\nimport  { FirstSelect } from './CreateArticlesElements/firstSelect.tsx'\nimport  { SecondSelect } from './CreateArticlesElements/SecondSelect.tsx'\nconst  service  =  new  Service();\n\ninterface ParentState {\n  catalog:any[];\n  loading: boolean;\n  first_value: string;\n  second_value: string;\n  second_steck: any[];\n  opend: string;\n}\n\nclass CreateArticle extends Component<{}, ParentState>{\n\n  constructor(props) {\n    super(props);\n    this.first_change = this.first_change.bind(this)\n    this.second_change = this.second_change.bind(this)\n   \n\n\n    let catalog = []\n    if(localStorage.getItem('catalog')){\n      catalog = JSON.parse(localStorage.getItem('catalog'))\n    }\n    this.state = {\n      catalog:  catalog,\n      status:null,\n      first_value: \"\",\n      second_value: \"selected\",\n      second_steck: [],\n      type: \"selected\",\n      temp_type: \"selected\",\n      constructor: false,\n      new_article: [],\n      redaction: -1,\n      no_link: \"create-article__type-new-block-no-link form-control create-article__input\",\n      loading: true\n    };\n  }\n  componentDidMount(){\n    var  self  =  this;\n    service.getCatalog().then(function (result) {\n      self.setState({ catalog: result, loading: false })\n    })\n\n  }\n  \n  first_change  = ( title: string ) =>  {\n    let target : any[];\n    console.log(title)\n    for (let i = 0; i<this.state.catalog.length; i++) {\n      if(title === this.state.catalog[i][0]) {\n        target = this.state.catalog[i].slice(1)\n        break;\n      }\n    }\n    this.setState({\n      second_steck: target,\n      first_value: title\n    })\n  }\n\n  second_change  = ( title: string ) =>  {\n    this.setState({second_value: title});\n  }\n  \n  componentDidUpdate(prevProps, prevState) {\n    const { match: { params } } = this.props;\n    if (params.pk !== this.state.opend) {\n      this.setState({opend: params.pk});\n    }\n  }\n\n  publicateArticle(){\n\n    if (this.state.new_article[0][1] !== \"header\") {\n      alert(\"Статья должна начинаться с Заголовока\")\n    } else{\n      this.setState({loading: true})\n      var  self  =  this;\n\n      var raw = {\n        \"type\": this.state.first_value,\n        \"under_type\": this.state.second_value.toString(),\n        \"article\": this.state.new_article\n      }\n      service.createArticle(raw).then(function (result) {\n        self.setState({loading:false})\n        alert(\"Статья добавлена, и на ходится на модерации,спасибо, удачного дня!)\")\n        window.location.reload();\n      });\n    }\n  }\n\n  render() {\n\n    let styleOfCreatorBlock = this.state.second_value !== \"selected\"\n                      ? \"\"\n                      : \"create-article__non-display\"\n   \n\n\n    if (this.state.loading) {\n      return (\n        <>\n        <div className=\"cssload-container\">\n            <div className=\"cssload-zenith\"></div>\n        </div>\n        </>\n      )\n    \n    }  else return(\n      <div className=\"create-article__container\">\n\n\n        <FirstSelect catalog={this.state.catalog} firstChange={this.first_change}/>\n        <SecondSelect catalog={this.state.second_steck} secondChange={this.second_change}/>\n  \n        <div className={styleOfCreatorBlock}>\n            <ArticleCreator type={this.state.first_value} under_type={this.state.second_value} />\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default CreateArticle;\n"]},"metadata":{},"sourceType":"module"}