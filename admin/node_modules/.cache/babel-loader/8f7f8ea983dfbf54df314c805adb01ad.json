{"ast":null,"code":"import _classCallCheck from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import Service from'./Service';import{FindForm}from'./FindCatalog.tsx';var service=new Service();var Catalog=/*#__PURE__*/function(_Component){_inherits(Catalog,_Component);var _super=_createSuper(Catalog);function Catalog(props){var _this;_classCallCheck(this,Catalog);_this=_super.call(this,props);_this.FindFormHandler=function(title){_this.setState({find:title});};var catalog=[];if(localStorage.getItem('catalog')){catalog=JSON.parse(localStorage.getItem('catalog'));}_this.state={catalog:catalog,find:null,loading:false};return _this;}_createClass(Catalog,[{key:\"componentDidMount\",value:function componentDidMount(){var self=this;service.getCatalog().then(function(result){if(!localStorage.getItem('catalog')||JSON.parse(localStorage.getItem('catalog'))!==result){self.setState({catalog:result});localStorage.setItem('catalog',JSON.stringify(result));}self.setState({loading:false});});}},{key:\"catalog_finded\",value:function catalog_finded(temp){if(!this.state.find||temp[0].toLowerCase().indexOf(this.state.find.toLowerCase())!==-1){if(temp[2]&&temp[2]===\"unmod\"){return\"catalog__second-level-unmod\";}else if(temp[2]&&temp[2]===\"noDisplay\"){return\"catalog__second-level-delete\";}else{return\"catalog_second-level\";}}else{return\"admin__nonDisplay\";}}},{key:\"catalogFindGlobal\",value:function catalogFindGlobal(temp){if(!this.state.find){return\"catalog_global-level\";}else if(temp.join(\" \").toLowerCase().indexOf(this.state.find.toLowerCase())!==-1){return\"catalog_global-level\";}else{return\"admin__nonDisplay\";}}},{key:\"catalogFindFirst\",value:function catalogFindFirst(temp){if(!this.state.find){return\"catalog_first-level\";}else if(temp.join(\" \").toLowerCase().indexOf(this.state.find.toLowerCase())!==-1){return\"catalog_first-level\";}else{return\"admin__nonDisplay\";}}},{key:\"modInfo\",value:function modInfo(second){if(second[2]&&second[2]===\"unmod\"){return\" (На проверке)\";}else if(second[2]&&second[2]===\"noDisplay\"){}}},{key:\"displayList\",value:function displayList(first){var _this2=this;return first.map(function(second){return/*#__PURE__*/React.createElement(\"div\",{key:second,className:_this2.catalog_finded(second)},/*#__PURE__*/React.createElement(Link,{to:\"/Article/\"+second[1]},second[0]),_this2.modInfo(second),/*#__PURE__*/React.createElement(\"div\",{className:\"catalog__reit\"},\"(\"+second[3]+\")\"));});}},{key:\"render\",value:function render(){var _this3=this;if(this.state.loading){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"cssload-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"cssload-zenith\"})));}else return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"catalog\"},/*#__PURE__*/React.createElement(\"h1\",null,\" \\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433 \"),/*#__PURE__*/React.createElement(FindForm,{onAdd:this.FindFormHandler}),/*#__PURE__*/React.createElement(\"div\",{className:\"catalog__container\"},this.state.catalog.map(function(global){return/*#__PURE__*/React.createElement(\"div\",{key:global,className:_this3.catalogFindGlobal(global)},/*#__PURE__*/React.createElement(\"h2\",null,global[0]),global.slice(1).map(function(first){return/*#__PURE__*/React.createElement(\"div\",{key:first,className:_this3.catalogFindFirst(first)},/*#__PURE__*/React.createElement(\"h4\",null,first[0]),_this3.displayList(first[1]));}));}))));}}]);return Catalog;}(Component);export default Catalog;","map":{"version":3,"sources":["/home/oem/React/ServiceOfTutorials/frontend/src/Catalog.tsx"],"names":["React","Component","Link","Service","FindForm","service","Catalog","props","FindFormHandler","title","setState","find","catalog","localStorage","getItem","JSON","parse","state","loading","self","getCatalog","then","result","setItem","stringify","temp","toLowerCase","indexOf","join","second","first","map","catalog_finded","modInfo","global","catalogFindGlobal","slice","catalogFindFirst","displayList"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react';\n\nimport { Link } from 'react-router-dom';\n\n\nimport  Service  from  './Service';\nimport { FindForm } from './FindCatalog.tsx';\nconst  service  =  new  Service();\n\ninterface ParentState {\n  find:string;\n  catalog:any[];\n  loading:boolean;\n}\n\n\nclass Catalog extends Component<{}, ParentState>{\n  constructor(props) {\n    super(props);\n\n\n    let catalog : any [] = []\n    if(localStorage.getItem('catalog')){\n      catalog = JSON.parse(localStorage.getItem('catalog'))\n    }\n    this.state = {\n      catalog: catalog,\n      find: null,\n      loading: false\n    }\n  }\n  componentDidMount(){\n    var  self  =  this;\n    service.getCatalog().then(function (result) {\n      if(!localStorage.getItem('catalog') || JSON.parse(localStorage.getItem('catalog')) !== result){\n        self.setState({ catalog: result })\n        localStorage.setItem('catalog', JSON.stringify(result))\n      }\n      self.setState({ loading: false })\n    });\n  }\n\n\n  catalog_finded(temp) {\n\n    if (!this.state.find \n      || temp[0].toLowerCase().indexOf(this.state.find.toLowerCase()) !== -1){\n        if (temp[2] && temp[2] === \"unmod\") {\n          return \"catalog__second-level-unmod\"\n        } else if (temp[2] && temp[2] === \"noDisplay\") {\n          return \"catalog__second-level-delete\"\n        } else {\n          return \"catalog_second-level\"\n        }\n    } else {\n      return \"admin__nonDisplay\"\n    }\n  }\n\n  catalogFindGlobal (temp) {\n    if (!this.state.find){\n      return \"catalog_global-level\"\n    } else if(temp.join(\" \").toLowerCase().indexOf(this.state.find.toLowerCase()) !== -1) {\n      return \"catalog_global-level\"\n    } else {\n      return \"admin__nonDisplay\"\n    }\n    \n  }\n  catalogFindFirst (temp) {\n    if (!this.state.find){\n      return \"catalog_first-level\"\n    } else if(temp.join(\" \").toLowerCase().indexOf(this.state.find.toLowerCase()) !== -1) {\n      return \"catalog_first-level\"\n    } else {\n      return \"admin__nonDisplay\"\n    }\n    \n  }\n\n\n  modInfo(second) {\n    if(second[2] && second[2] === \"unmod\"){\n      return \" (На проверке)\"\n    } else if(second[2] && second[2] === \"noDisplay\"){}\n  }  \n  displayList(first){\n    return( \n      first.map( second  =>\n        <div key={second} className={this.catalog_finded(second)}>\n          <Link\n          to={\"/Article/\"+second[1]}>{second[0]}</Link>\n          {this.modInfo(second)}\n          <div className=\"catalog__reit\" >{\"(\"+second[3]+\")\"}</div>\n          \n        </div>\n      )\n    )\n  }\n  FindFormHandler = ( title: string ) => {\n    this.setState({ find: title })\n  }\n  \n  render() {\n    if (this.state.loading) {\n      return (\n        <>\n        <div className=\"cssload-container\">\n            <div className=\"cssload-zenith\"></div>\n        </div>\n        </>\n      )\n    \n    } else return(   \n      <>\n      <div className=\"catalog\">\n\n        <h1> Каталог </h1>\n          <FindForm onAdd={this.FindFormHandler}/>\n          <div className=\"catalog__container\">\n          { \n            this.state.catalog.map( global  =>\n              <div key={global} className={this.catalogFindGlobal(global)}>\n                <h2 >{global[0]}</h2>\n                { \n                  global.slice(1).map( first  =>\n                    <div key={first} className={this.catalogFindFirst(first)}>\n                      <h4>{first[0]}</h4>\n                      {this.displayList(first[1])}\n                    </div>\n                  )\n                }\n              </div>\n            )\n          }\n          </div>\n\n        \n      </div>\n      </>\n    );\n  }\n}\n\nexport default Catalog;"]},"metadata":{},"sourceType":"module"}