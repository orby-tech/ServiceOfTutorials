{"ast":null,"code":"import _classCallCheck from\"/home/oem/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/oem/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/oem/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/oem/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/oem/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import Service from'./Service';var service=new Service();function sortfunction(a,b){return a[0][3]-b[0][3];}var NewArticles=/*#__PURE__*/function(_Component){_inherits(NewArticles,_Component);var _super=_createSuper(NewArticles);function NewArticles(props){var _this;_classCallCheck(this,NewArticles);_this=_super.call(this,props);_this.findClick=_this.findClick.bind(_assertThisInitialized(_this));var newArticles=[];if(localStorage.getItem('newArticles')){newArticles=JSON.parse(localStorage.getItem('newArticles'));}_this.state={catalog:[],find:null,loading:false,NewArticles:newArticles};return _this;}_createClass(NewArticles,[{key:\"componentDidMount\",value:function componentDidMount(){var self=this;service.getCatalog().then(function(result){self.setState({catalog:result,loading:true});var arr=[];self.state.catalog.map(function(global){return global.splice(1).map(function(first){return first[1].forEach(function(second){if(second[1]&&second[2]!==\"noDisplay\"){arr.push([[global[0],first[0]].concat(second)]);}});});});arr.sort(sortfunction);arr.reverse();console.log(arr);self.setState({NewArticles:arr,loading:false});});}},{key:\"catalog_finded\",value:function catalog_finded(temp){temp=temp.toLowerCase();var str=this.state.find?this.state.find.toLowerCase():null;return temp.indexOf(str)!==-1?\"catalog__finded-style\":\"\";}},{key:\"findClick\",value:function findClick(){this.setState({find:document.getElementById(\"catalog__input-find-group\").value});}},{key:\"modStyle\",value:function modStyle(second){if(second[2]&&second[2]===\"unmod\"){return\"catalog__second-level-unmod\";}else if(second[2]&&second[2]===\"noDisplay\"){return\"catalog__second-level-delete\";}else{return\"catalog_second-level\";}}},{key:\"modInfo\",value:function modInfo(second){if(second[2]&&second[2]===\"unmod\"){return\" (На проверке)\";}else if(second[2]&&second[2]===\"noDisplay\"){}}},{key:\"render\",value:function render(){if(this.state.loading){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"cssload-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"cssload-zenith\"})));}else return/*#__PURE__*/React.createElement(\"div\",{className:\"catalog\"},/*#__PURE__*/React.createElement(\"h1\",null,\" \\u041D\\u043E\\u0432\\u044B\\u0435 \\u0441\\u0442\\u0430\\u0442\\u044C\\u0438 \"),/*#__PURE__*/React.createElement(\"div\",{className:\"catalog__header-find-group\"},\" \\u041D\\u0430\\u0439\\u0442\\u0438 \\u0432 \\u043A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\\u0435:\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control catalog__input-find-group\",id:\"catalog__input-find-group\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"form-control catalog__button-find-group\",onClick:this.findClick},\"\\u041D\\u0430\\u0439\\u0442\\u0438\"),/*#__PURE__*/React.createElement(\"div\",null),this.state.NewArticles.map(function(global){return/*#__PURE__*/React.createElement(\"div\",{className:\"newArticlesList__article\",key:global},/*#__PURE__*/React.createElement(Link,{className:\"newArticlesList__link\",to:\"/Article/\"+global[0][3]},global[0][2]),/*#__PURE__*/React.createElement(\"p\",{className:\"newArticlesList__context\"},global[0][1],\" (\",global[0][0],\") \\u0440\\u0435\\u0439\\u0442\\u0438\\u043D\\u0433:  \",global[0][5]));}));}}]);return NewArticles;}(Component);export default NewArticles;","map":{"version":3,"sources":["/home/oem/ServiceOfTutorials/frontend/src/NewArticlesList.js"],"names":["React","Component","Link","Service","service","sortfunction","a","b","NewArticles","props","findClick","bind","newArticles","localStorage","getItem","JSON","parse","state","catalog","find","loading","self","getCatalog","then","result","setState","arr","map","global","splice","first","forEach","second","push","concat","sort","reverse","console","log","temp","toLowerCase","str","indexOf","document","getElementById","value"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react';\n\nimport { Link } from 'react-router-dom';\nimport  Service  from  './Service';\n\n\nconst  service  =  new  Service();\n\n\nfunction sortfunction(a, b){\n  return (a[0][3] - b[0][3])\n  }\n\nclass NewArticles extends Component{\n  constructor(props) {\n    super(props);\n    this.findClick = this.findClick.bind(this)\n\n    \n    let newArticles = []\n    if(localStorage.getItem('newArticles')){\n      newArticles = JSON.parse(localStorage.getItem('newArticles'))\n    }\n    this.state = {\n      catalog: [],\n      find: null,\n      loading: false,\n      NewArticles: newArticles,\n    }\n  }\n\n\n  componentDidMount(){\n    var  self  =  this;\n    service.getCatalog().then(function (result) {\n      self.setState({ catalog: result, loading: true })\n        let arr = []\n        self.state.catalog.map( global=>\n            global.splice(1).map( first => \n                first[1].forEach( second  => {\n                    if(second[1] && second[2] !== \"noDisplay\"){\n                            arr.push([[global[0], first[0]].concat(second)])\n                    }\n                })   \n            )\n        )\n        arr.sort(sortfunction)\n        arr.reverse()\n        console.log(arr)\n        self.setState({NewArticles: arr, loading: false})\n    });\n  }\n\n\n  catalog_finded(temp) {\n    temp= temp.toLowerCase()\n    let str = this.state.find ? this.state.find.toLowerCase() : null\n    return temp.indexOf(str) !== -1 ? \"catalog__finded-style\" : \"\"\n  }\n\n\n  findClick(){\n    this.setState({find: document.getElementById(\"catalog__input-find-group\").value})\n  }\n\n\n  modStyle(second) {\n    if (second[2] && second[2] === \"unmod\") {\n      return \"catalog__second-level-unmod\"\n    } else if (second[2] && second[2] === \"noDisplay\") {\n      return \"catalog__second-level-delete\"\n    } else {\n      return \"catalog_second-level\"\n    }\n  }\n\n\n  modInfo(second) {\n    if(second[2] && second[2] === \"unmod\"){\n      return \" (На проверке)\"\n    } else if(second[2] && second[2] === \"noDisplay\"){}\n  }  \n\n  \n  render() {\n    if (this.state.loading) {\n      return (\n        <>\n        <div className=\"cssload-container\">\n            <div className=\"cssload-zenith\"></div>\n        </div>\n        </>\n      )\n    \n    } else return(   \n      <div className=\"catalog\">\n\n        <h1> Новые статьи </h1>\n          <div className=\"catalog__header-find-group\"> Найти в каталоге:</div>\n          <input className=\"form-control catalog__input-find-group\"\n                  id=\"catalog__input-find-group\"/>\n          <button className=\"form-control catalog__button-find-group\"\n                  onClick={this.findClick}>\n            Найти\n          </button>\n          <div/>\n          { \n            this.state.NewArticles.map( global  =>\n                <div className=\"newArticlesList__article\" key={global}> \n                    <Link className=\"newArticlesList__link\" to={\"/Article/\"+global[0][3]}>{global[0][2]}</Link> \n                    <p className=\"newArticlesList__context\">{global[0][1]} ({global[0][0]}) рейтинг:  { global[0][5]}</p>\n                </div>\n            )\n          }\n\n      </div>\n    );\n  }\n}\n\nexport default NewArticles;"]},"metadata":{},"sourceType":"module"}