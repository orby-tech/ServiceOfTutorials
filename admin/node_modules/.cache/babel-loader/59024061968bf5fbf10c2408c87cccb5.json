{"ast":null,"code":"import _classCallCheck from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Modal from'react-bootstrap/Modal';import Service from'./../Service';var service=new Service();var AdminStructure=/*#__PURE__*/function(_Component){_inherits(AdminStructure,_Component);var _super=_createSuper(AdminStructure);function AdminStructure(props){var _this;_classCallCheck(this,AdminStructure);_this=_super.call(this,props);_this.closeModal=_this.closeModal.bind(_assertThisInitialized(_this));_this.typeUppend=_this.typeUppend.bind(_assertThisInitialized(_this));_this.underTypeUppend=_this.underTypeUppend.bind(_assertThisInitialized(_this));_this.state={catalogStructure:[],showNewType:false,type:null,loading:false};return _this;}_createClass(AdminStructure,[{key:\"componentDidMount\",value:function componentDidMount(){var self=this;var temp_arr=[];service.getCatalog().then(function(result){var arr=[];result.forEach(function(global){temp_arr=[];global.splice(1).map(function(first){return temp_arr.push(first[0]);});arr.push([global[0],temp_arr]);});self.setState({catalogStructure:arr});});}},{key:\"typeUppend\",value:function typeUppend(){this.setState({showNewType:true,type:-1});}},{key:\"underTypeUppend\",value:function underTypeUppend(type){this.setState({showNewType:true,type:type});}},{key:\"newTypeUppend\",value:function newTypeUppend(){this.setState({loading:true});var self=this;var raw={type:this.state.type,newValue:document.getElementById(\"newTypeName\").value};console.log(raw);service.newType(raw).then(function(result){window.location.reload();self.setState({loading:false,type:null});});}},{key:\"closeModal\",value:function closeModal(){this.setState({showNewType:false});}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"structure__block\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",onClick:function onClick(){return _this2.typeUppend();}},\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u0435\\u043C\\u0443\"),/*#__PURE__*/React.createElement(\"br\",null),this.state.catalogStructure.map(function(global){return/*#__PURE__*/React.createElement(\"div\",{className:\"structure__type\"},/*#__PURE__*/React.createElement(\"h3\",null,\" \",global[0]),/*#__PURE__*/React.createElement(\"div\",{className:\"structure__container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"structure__typeButton\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",onClick:function onClick(){return _this2.underTypeUppend(global[0]);}},\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\")),/*#__PURE__*/React.createElement(\"div\",{className:\"structure__underType\"},global[1].map(function(first){return/*#__PURE__*/React.createElement(\"p\",null,first);}))));}),/*#__PURE__*/React.createElement(Modal,{show:this.state.showNewType,onHide:this.closeModal},/*#__PURE__*/React.createElement(\"div\",{className:\"newComment__container\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0440\\u0430\\u0437\\u0434\\u0435\\u043B\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",id:\"newTypeName\",placeholder:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u0440\\u0430\\u0437\\u0434\\u0435\\u043B\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"newComment__uppend btn btn-success\",onClick:function onClick(){return _this2.newTypeUppend();}},\" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \"))));}}]);return AdminStructure;}(Component);export default AdminStructure;","map":{"version":3,"sources":["/home/oem/React/ServiceOfTutorials/frontend/src/AdminElements/AdminStructure.js"],"names":["React","Component","Modal","Service","service","AdminStructure","props","closeModal","bind","typeUppend","underTypeUppend","state","catalogStructure","showNewType","type","loading","self","temp_arr","getCatalog","then","result","arr","forEach","global","splice","map","first","push","setState","raw","newValue","document","getElementById","value","console","log","newType","window","location","reload","newTypeUppend"],"mappings":"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","sourcesContent":["import  React, { Component }  from 'react';\n\n\nimport Modal from 'react-bootstrap/Modal';\nimport  Service  from  './../Service';\n\n\n\nconst  service  =  new  Service();\n\n\nclass AdminStructure extends Component{\n\n  constructor(props) {\n    super(props);\n\n    this.closeModal = this.closeModal.bind(this)\n    this.typeUppend = this.typeUppend.bind(this)\n    this.underTypeUppend = this.underTypeUppend.bind(this)\n\n    this.state = {\n      catalogStructure: [],\n      showNewType: false,\n      type: null,\n      loading: false\n    };\n  }\n  componentDidMount(){\n    var  self  =  this;\n    let temp_arr = []\n    service.getCatalog().then(function (result) {\n      let arr = []\n      result.forEach(global => {\n        temp_arr = []\n        global.splice(1).map ( first => temp_arr.push(first[0]) )\n        arr.push([global[0], temp_arr])\n      })\n\n      self.setState({catalogStructure: arr})\n    });\n  }\n  typeUppend(){\n    this.setState({\n      showNewType: true,\n      type: -1\n    })\n  }\n  underTypeUppend(type){\n    this.setState({\n      showNewType: true,\n      type: type\n    })\n  }\n  newTypeUppend(){\n    this.setState({loading:true})\n    var  self  =  this;\n    let raw = {\n      type:this.state.type,\n      newValue: document.getElementById(\"newTypeName\").value\n\n    }\n    console.log(raw)\n    service.newType(raw).then(function (result) {\n      window.location.reload()\n      self.setState({\n        loading: false,\n        type: null\n      })\n    });\n  }\n\n  closeModal(){\n    this.setState({showNewType: false})\n  }\n  render() {\n    return(\n      <div className=\"structure__block\">\n        <button className=\"btn btn-success\" onClick={() => this.typeUppend()}> \n          Добавить тему\n        </button>\t\n        <br />\n        {\n          this.state.catalogStructure.map(global =>\n            <div className=\"structure__type\">\n              <h3> {global[0]}</h3>\n              <div className=\"structure__container\">\n                <div className=\"structure__typeButton\">\n                  <button className=\"btn btn-success\" onClick={() => this.underTypeUppend(global[0])}> \n                    Добавить \n                  </button>\t                \n                </div>\n                <div className=\"structure__underType\">\n                  {\n                    global[1].map( first =>\n                        <p>{first}</p>\n                      )\n                  }\n                </div>\n              </div>\n            </div>            \n            )\n        }\n\n        <Modal show={this.state.showNewType} onHide={this.closeModal}>\n          <div className=\"newComment__container\">\n            <h3>Добавить раздел</h3>\n\n              <input className=\"form-control\" id=\"newTypeName\" placeholder=\"Новый раздел\"/>\n              <button className=\"newComment__uppend btn btn-success\" onClick={() => this.newTypeUppend()}> Добавить </button>\t \n\n\n          </div>\n\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default AdminStructure;\n"]},"metadata":{},"sourceType":"module"}