{"ast":null,"code":"var _jsxFileName = \"/home/oem/ServiceOfTutorials/frontend/src/AdminElements/AdminNewArticles.js\";\nimport React, { Component } from 'react';\nimport deletePNG from \"./../img/delete.png\";\nimport upgradePNG from \"./../img/upgrade.png\";\nimport Service from './../Service';\nconst service = new Service();\n\nclass AdminNewArticles extends Component {\n  constructor(props) {\n    super(props);\n    this.goodStateUpdate = this.goodStateUpdate.bind(this);\n    this.badStateUpdate = this.badStateUpdate.bind(this);\n    this.state = {\n      catalog: [],\n      type: \"newArticles\",\n      newArticles: [],\n      selectedArticle: 0,\n      article: [],\n      reload: false,\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    var self = this;\n    service.getCatalog().then(function (result) {\n      let arr = [];\n\n      for (let i = 0; i < result.length; i++) {\n        for (let j = 1; j < result[i].length; j++) {\n          for (let z = 0; z < result[i][j][1].length; z++) {\n            if (result[i][j][1][z][2] && result[i][j][1][z][2] === \"unmod\") {\n              arr.push([result[i][j][1][z], result[i][0], result[i][j][0]]);\n            }\n          }\n        }\n      }\n\n      if (arr.length !== 0) {\n        service.getArticle({\n          id: arr[0][0][1].toString()\n        }).then(function (result_article) {\n          self.setState({\n            article: result_article,\n            catalog: result,\n            newArticles: arr,\n            selectedArticle: arr.length > 0 ? 0 : -1,\n            loading: false\n          });\n        });\n      } else {\n        self.setState({\n          loading: false\n        });\n      }\n    });\n  }\n\n  type_change(event) {\n    this.setState({\n      type: event.target.value\n    });\n  }\n\n  goodStateUpdate() {\n    if (this.state.newArticles) {\n      this.setState({\n        loading: true\n      });\n      var raw = {\n        \"id\": this.state.newArticles[this.state.selectedArticle]\n      };\n      var self = this;\n      service.goodArticleUpdate(raw).then(function (result) {\n        window.location.reload();\n        self.setState({\n          loading: false\n        });\n      });\n    }\n  }\n\n  badStateUpdate() {\n    if (this.state.newArticles) {\n      this.setState({\n        loading: true\n      });\n      var raw = {\n        \"id\": this.state.newArticles[this.state.selectedArticle]\n      };\n      var self = this;\n      service.badArticleUpdate(raw).then(function (result) {\n        window.location.reload();\n        self.setState({\n          loading: false\n        });\n      });\n    }\n  }\n\n  render() {\n    let newArticlesState = this.state.type === \"newArticles\" ? \"\" : \"admin__nonDisplay\";\n\n    if (this.state.loading) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cssload-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cssload-zenith\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }\n      })));\n    } else if (this.state.newArticles.length === 0) {\n      return \"Нет новых статей\";\n    } else return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"admin__container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: newArticlesState,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"admin__newArticlesSelectorBlock\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"admin__selector\",\n      alt: \"delete\",\n      onClick: this.badStateUpdate,\n      src: deletePNG,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      className: \"admin__selector\",\n      alt: \"upgrade\",\n      onClick: this.goodStateUpdate,\n      src: upgradePNG,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"admin__grade\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }, \" \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"admin__selectedArticle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    }, this.state.article.map(second => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 29\n      }\n    }, \" \", second[0], \" \"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 29\n      }\n    }, \" \", second[1], \" \")))))));\n  }\n\n}\n\nexport default AdminNewArticles;","map":{"version":3,"sources":["/home/oem/ServiceOfTutorials/frontend/src/AdminElements/AdminNewArticles.js"],"names":["React","Component","deletePNG","upgradePNG","Service","service","AdminNewArticles","constructor","props","goodStateUpdate","bind","badStateUpdate","state","catalog","type","newArticles","selectedArticle","article","reload","loading","componentDidMount","self","getCatalog","then","result","arr","i","length","j","z","push","getArticle","id","toString","result_article","setState","type_change","event","target","value","raw","goodArticleUpdate","window","location","badArticleUpdate","render","newArticlesState","map","second"],"mappings":"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","sourcesContent":["import  React, { Component }  from 'react';\n\n\nimport  deletePNG from \"./../img/delete.png\";\nimport  upgradePNG from \"./../img/upgrade.png\";\nimport  Service  from  './../Service';\n\n\n\nconst  service  =  new  Service();\n\n\nclass AdminNewArticles extends Component{\n\n  constructor(props) {\n    super(props);\n    this.goodStateUpdate = this.goodStateUpdate.bind(this)\n    this.badStateUpdate = this.badStateUpdate.bind(this)\n    this.state = {\n      catalog: [],\n      type: \"newArticles\",\n      newArticles: [],\n      selectedArticle: 0,\n      article: [],\n      reload: false,\n      loading: true\n    };\n  }\n  componentDidMount(){\n    var  self  =  this;\n    service.getCatalog().then(function (result) {\n      let arr = []\n      for (let i=0; i<result.length; i++){\n        for (let j=1; j<result[i].length; j++){  \n          for (let z=0; z<result[i][j][1].length; z++){\n\n              if (result[i][j][1][z][2] && result[i][j][1][z][2] === \"unmod\"){\n                arr.push([result[i][j][1][z], result[i][0], result[i][j][0]])\n              }\n          \n          }\n        }\n      }\n     if (arr.length!==0) {\n        service.getArticle({id: arr[0][0][1].toString()}).then(function (result_article) {\n          self.setState({    \n            article: result_article,\n            catalog: result,\n            newArticles: arr,\n            selectedArticle: arr.length > 0 ? 0 : -1,\n            loading:false\n          })\n        });\n        \n        } else {\n          self.setState({loading:false})\n        }   \n    });\n  }\n\n\n\n  type_change(event) {\n    this.setState({type: event.target.value})\n  }\n  \n\n  goodStateUpdate(){\n    if(this.state.newArticles){\n      \n      this.setState({loading: true})\n      var raw = {\"id\": this.state.newArticles[this.state.selectedArticle]};\n      var  self  =  this;\n      service.goodArticleUpdate(raw).then(function (result) {\n        window.location.reload();\n        self.setState({loading: false})\n      })\n    }\n  }\n  badStateUpdate(){\n    if(this.state.newArticles){\n      \n      this.setState({loading: true})\n      var raw = {\"id\": this.state.newArticles[this.state.selectedArticle]};\n      var  self  =  this;\n      service.badArticleUpdate(raw).then(function (result) {\n        window.location.reload()\n        self.setState({loading: false})\n      })\n    }\n  }\n\n\n  render() {\n    let newArticlesState = this.state.type === \"newArticles\"\n    ? \"\"\n    : \"admin__nonDisplay\"\n    if (this.state.loading) {\n      return (\n        <>\n        <div className=\"cssload-container\">\n            <div className=\"cssload-zenith\"></div>\n        </div>\n        </>\n      )\n    \n    } else if(this.state.newArticles.length===0){\n      return(\"Нет новых статей\")\n\n    } else return(\n      <div className=\"admin__container\">\n\n\n\n\n        <div className={newArticlesState}>\n          <div className=\"admin__newArticlesSelectorBlock\">      \n            <img \n              className=\"admin__selector\"     \n              alt=\"delete\"\n\n              onClick={this.badStateUpdate}\n              src={deletePNG}/>            \n            <img \n              className=\"admin__selector\"     \n              alt=\"upgrade\"\n              onClick={this.goodStateUpdate}\n              src={upgradePNG}/>\n          </div>\n\n          <div className=\"admin__grade\"> </div>\n\n          <div className=\"admin__selectedArticle\">\n            <table>\n                      { \n                        this.state.article.map( second  =>\n                          <tr> \n                            <td> {second[0]} </td>\n                            <td> {second[1]} </td>\n                          </tr>\n                          \n                        )\n                      }\n            </table>\n          </div>\n\n        </div>\n\n\n\n\n\n\n      </div>\n    );\n  }\n}\n\nexport default AdminNewArticles;\n"]},"metadata":{},"sourceType":"module"}