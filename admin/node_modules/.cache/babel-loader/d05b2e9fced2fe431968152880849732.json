{"ast":null,"code":"var _jsxFileName = \"/home/oem/React/ServiceOfTutorials/frontend/src/Catalog.tsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Service from './Service';\nimport { FindForm } from './FindCatalog.tsx';\nimport { multilanguage } from \"redux-multilanguage\";\nimport { connect } from 'react-redux';\nconst service = new Service();\n\nclass PRECatalog extends Component {\n  constructor(props) {\n    super(props);\n\n    this.FindFormHandler = title => {\n      this.setState({\n        find: title\n      });\n    };\n\n    let catalog = [];\n\n    if (localStorage.getItem('catalog' + this.props.currentLanguageCode)) {\n      catalog = JSON.parse(localStorage.getItem('catalog' + this.props.currentLanguageCode));\n    }\n\n    this.state = {\n      catalog: catalog,\n      find: null,\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    var self = this;\n    service.getCatalog().then(function (result) {\n      if (!localStorage.getItem('catalog') || JSON.parse(localStorage.getItem('catalog')) !== result) {\n        self.setState({\n          catalog: result\n        });\n        localStorage.setItem('catalog', JSON.stringify(result));\n      }\n\n      self.setState({\n        loading: false\n      });\n    });\n  }\n\n  catalog_finded(temp) {\n    if (!this.state.find || temp[0].toLowerCase().indexOf(this.state.find.toLowerCase()) !== -1) {\n      if (temp[2] && temp[2] === \"unmod\") {\n        return \"catalog__second-level-unmod\";\n      } else if (temp[2] && temp[2] === \"noDisplay\") {\n        return \"catalog__second-level-delete\";\n      } else {\n        return \"catalog_second-level\";\n      }\n    } else {\n      return \"admin__nonDisplay\";\n    }\n  }\n\n  catalogFindGlobal(temp) {\n    if (!this.state.find) {\n      return \"catalog_global-level\";\n    } else if (temp.join(\" \").toLowerCase().indexOf(this.state.find.toLowerCase()) !== -1) {\n      return \"catalog_global-level\";\n    } else {\n      return \"admin__nonDisplay\";\n    }\n  }\n\n  catalogFindFirst(temp) {\n    if (!this.state.find) {\n      return \"catalog_first-level\";\n    } else if (temp.join(\" \").toLowerCase().indexOf(this.state.find.toLowerCase()) !== -1) {\n      return \"catalog_first-level\";\n    } else {\n      return \"admin__nonDisplay\";\n    }\n  }\n\n  modInfo(second) {\n    if (second[2] && second[2] === \"unmod\") {\n      return \" (На проверке)\";\n    } else if (second[2] && second[2] === \"noDisplay\") {}\n  }\n\n  displayList(first) {\n    return first.map(second => /*#__PURE__*/React.createElement(\"div\", {\n      key: second,\n      className: this.catalog_finded(second),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/Article/\" + second[1],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, second[0]), this.modInfo(second), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"catalog__reit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    }, \"(\" + second[3] + \")\")));\n  }\n\n  render() {\n    const {\n      strings,\n      currentLanguageCode\n    } = this.props;\n\n    if (this.state.loading) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cssload-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cssload-zenith\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }\n      })));\n    } else return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"catalog\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, \" \", strings[\"catalog\"], \" \"), /*#__PURE__*/React.createElement(FindForm, {\n      onAdd: this.FindFormHandler,\n      strings: strings[\"find\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"catalog__container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }\n    }, this.state.catalog.map(global => /*#__PURE__*/React.createElement(\"div\", {\n      key: global,\n      className: this.catalogFindGlobal(global),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, global[0]), global.slice(1).map(first => /*#__PURE__*/React.createElement(\"div\", {\n      key: first,\n      className: this.catalogFindFirst(first),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 23\n      }\n    }, first[0]), this.displayList(first[1]))))))));\n  }\n\n}\n\nconst Catalog = connect()(multilanguage(PRECatalog));\nexport default Catalog;","map":{"version":3,"sources":["/home/oem/React/ServiceOfTutorials/frontend/src/Catalog.tsx"],"names":["React","Component","Link","Service","FindForm","multilanguage","connect","service","PRECatalog","constructor","props","FindFormHandler","title","setState","find","catalog","localStorage","getItem","currentLanguageCode","JSON","parse","state","loading","componentDidMount","self","getCatalog","then","result","setItem","stringify","catalog_finded","temp","toLowerCase","indexOf","catalogFindGlobal","join","catalogFindFirst","modInfo","second","displayList","first","map","render","strings","global","slice","Catalog"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAkC,OAAlC;AAEA,SAASC,IAAT,QAAqB,kBAArB;AAGA,OAAQC,OAAR,MAAuB,WAAvB;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,SAASC,aAAT,QAA4D,qBAA5D;AACA,SAAUC,OAAV,QAAyB,aAAzB;AAEA,MAAOC,OAAO,GAAK,IAAKJ,OAAL,EAAnB;;AASA,MAAMK,UAAN,SAAyBP,SAAzB,CAAmD;AACjDQ,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAkFnBC,eAlFmB,GAkFCC,KAAF,IAAqB;AACrC,WAAKC,QAAL,CAAc;AAAEC,QAAAA,IAAI,EAAEF;AAAR,OAAd;AACD,KApFkB;;AAIjB,QAAIG,OAAgB,GAAG,EAAvB;;AACA,QAAGC,YAAY,CAACC,OAAb,CAAqB,YAAW,KAAKP,KAAL,CAAWQ,mBAA3C,CAAH,EAAmE;AACjEH,MAAAA,OAAO,GAAGI,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACC,OAAb,CAAqB,YAAU,KAAKP,KAAL,CAAWQ,mBAA1C,CAAX,CAAV;AACD;;AACD,SAAKG,KAAL,GAAa;AACXN,MAAAA,OAAO,EAAEA,OADE;AAEXD,MAAAA,IAAI,EAAE,IAFK;AAGXQ,MAAAA,OAAO,EAAE;AAHE,KAAb;AAKD;;AACDC,EAAAA,iBAAiB,GAAE;AACjB,QAAKC,IAAI,GAAK,IAAd;AACAjB,IAAAA,OAAO,CAACkB,UAAR,GAAqBC,IAArB,CAA0B,UAAUC,MAAV,EAAkB;AAC1C,UAAG,CAACX,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAD,IAAoCE,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,MAAgDU,MAAvF,EAA8F;AAC5FH,QAAAA,IAAI,CAACX,QAAL,CAAc;AAAEE,UAAAA,OAAO,EAAEY;AAAX,SAAd;AACAX,QAAAA,YAAY,CAACY,OAAb,CAAqB,SAArB,EAAgCT,IAAI,CAACU,SAAL,CAAeF,MAAf,CAAhC;AACD;;AACDH,MAAAA,IAAI,CAACX,QAAL,CAAc;AAAES,QAAAA,OAAO,EAAE;AAAX,OAAd;AACD,KAND;AAOD;;AAGDQ,EAAAA,cAAc,CAACC,IAAD,EAAO;AAEnB,QAAI,CAAC,KAAKV,KAAL,CAAWP,IAAZ,IACCiB,IAAI,CAAC,CAAD,CAAJ,CAAQC,WAAR,GAAsBC,OAAtB,CAA8B,KAAKZ,KAAL,CAAWP,IAAX,CAAgBkB,WAAhB,EAA9B,MAAiE,CAAC,CADvE,EACyE;AACrE,UAAID,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAJ,KAAY,OAA3B,EAAoC;AAClC,eAAO,6BAAP;AACD,OAFD,MAEO,IAAIA,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAJ,KAAY,WAA3B,EAAwC;AAC7C,eAAO,8BAAP;AACD,OAFM,MAEA;AACL,eAAO,sBAAP;AACD;AACJ,KATD,MASO;AACL,aAAO,mBAAP;AACD;AACF;;AAEDG,EAAAA,iBAAiB,CAAEH,IAAF,EAAQ;AACvB,QAAI,CAAC,KAAKV,KAAL,CAAWP,IAAhB,EAAqB;AACnB,aAAO,sBAAP;AACD,KAFD,MAEO,IAAGiB,IAAI,CAACI,IAAL,CAAU,GAAV,EAAeH,WAAf,GAA6BC,OAA7B,CAAqC,KAAKZ,KAAL,CAAWP,IAAX,CAAgBkB,WAAhB,EAArC,MAAwE,CAAC,CAA5E,EAA+E;AACpF,aAAO,sBAAP;AACD,KAFM,MAEA;AACL,aAAO,mBAAP;AACD;AAEF;;AACDI,EAAAA,gBAAgB,CAAEL,IAAF,EAAQ;AACtB,QAAI,CAAC,KAAKV,KAAL,CAAWP,IAAhB,EAAqB;AACnB,aAAO,qBAAP;AACD,KAFD,MAEO,IAAGiB,IAAI,CAACI,IAAL,CAAU,GAAV,EAAeH,WAAf,GAA6BC,OAA7B,CAAqC,KAAKZ,KAAL,CAAWP,IAAX,CAAgBkB,WAAhB,EAArC,MAAwE,CAAC,CAA5E,EAA+E;AACpF,aAAO,qBAAP;AACD,KAFM,MAEA;AACL,aAAO,mBAAP;AACD;AAEF;;AAGDK,EAAAA,OAAO,CAACC,MAAD,EAAS;AACd,QAAGA,MAAM,CAAC,CAAD,CAAN,IAAaA,MAAM,CAAC,CAAD,CAAN,KAAc,OAA9B,EAAsC;AACpC,aAAO,gBAAP;AACD,KAFD,MAEO,IAAGA,MAAM,CAAC,CAAD,CAAN,IAAaA,MAAM,CAAC,CAAD,CAAN,KAAc,WAA9B,EAA0C,CAAE;AACpD;;AACDC,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,WACEA,KAAK,CAACC,GAAN,CAAWH,MAAM,iBACf;AAAK,MAAA,GAAG,EAAEA,MAAV;AAAkB,MAAA,SAAS,EAAE,KAAKR,cAAL,CAAoBQ,MAApB,CAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AACA,MAAA,EAAE,EAAE,cAAYA,MAAM,CAAC,CAAD,CADtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAC4BA,MAAM,CAAC,CAAD,CADlC,CADF,EAGG,KAAKD,OAAL,CAAaC,MAAb,CAHH,eAIE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiC,MAAIA,MAAM,CAAC,CAAD,CAAV,GAAc,GAA/C,CAJF,CADF,CADF;AAWD;;AAKDI,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA,OAAF;AAAWzB,MAAAA;AAAX,QAAmC,KAAKR,KAA9C;;AACA,QAAI,KAAKW,KAAL,CAAWC,OAAf,EAAwB;AACtB,0BACE,uDACA;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADA,CADF;AAQD,KATD,MASO,oBACL,uDACA;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAMqB,OAAO,CAAC,SAAD,CAAb,MAFF,eAGI,oBAAC,QAAD;AAAU,MAAA,KAAK,EAAE,KAAKhC,eAAtB;AAAuC,MAAA,OAAO,EAAEgC,OAAO,CAAC,MAAD,CAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,eAII;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE,KAAKtB,KAAL,CAAWN,OAAX,CAAmB0B,GAAnB,CAAwBG,MAAM,iBAC5B;AAAK,MAAA,GAAG,EAAEA,MAAV;AAAkB,MAAA,SAAS,EAAE,KAAKV,iBAAL,CAAuBU,MAAvB,CAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAMA,MAAM,CAAC,CAAD,CAAZ,CADF,EAGIA,MAAM,CAACC,KAAP,CAAa,CAAb,EAAgBJ,GAAhB,CAAqBD,KAAK,iBACxB;AAAK,MAAA,GAAG,EAAEA,KAAV;AAAiB,MAAA,SAAS,EAAE,KAAKJ,gBAAL,CAAsBI,KAAtB,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKA,KAAK,CAAC,CAAD,CAAV,CADF,EAEG,KAAKD,WAAL,CAAiBC,KAAK,CAAC,CAAD,CAAtB,CAFH,CADF,CAHJ,CADF,CAFF,CAJJ,CADA,CADK;AA4BR;;AA9HgD;;AAgInD,MAAMM,OAAO,GAAGxC,OAAO,GAAGD,aAAa,CAACG,UAAD,CAAhB,CAAvB;AACA,eAAesC,OAAf","sourcesContent":["import React, { Component }  from 'react';\n\nimport { Link } from 'react-router-dom';\n\n\nimport  Service  from  './Service';\nimport { FindForm } from './FindCatalog.tsx';\nimport { multilanguage, changeLanguage, loadLanguages} from \"redux-multilanguage\";\nimport  { connect } from 'react-redux'\n\nconst  service  =  new  Service();\n\ninterface ParentState {\n  find:string;\n  catalog:any[];\n  loading:boolean;\n}\n\n\nclass PRECatalog extends Component<{}, ParentState>{\n  constructor(props) {\n    super(props);\n\n\n    let catalog : any [] = []\n    if(localStorage.getItem('catalog'+ this.props.currentLanguageCode)){\n      catalog = JSON.parse(localStorage.getItem('catalog'+this.props.currentLanguageCode))\n    }\n    this.state = {\n      catalog: catalog,\n      find: null,\n      loading: false\n    }\n  }\n  componentDidMount(){\n    var  self  =  this;\n    service.getCatalog().then(function (result) {\n      if(!localStorage.getItem('catalog') || JSON.parse(localStorage.getItem('catalog')) !== result){\n        self.setState({ catalog: result })\n        localStorage.setItem('catalog', JSON.stringify(result))\n      }\n      self.setState({ loading: false })\n    });\n  }\n\n\n  catalog_finded(temp) {\n\n    if (!this.state.find \n      || temp[0].toLowerCase().indexOf(this.state.find.toLowerCase()) !== -1){\n        if (temp[2] && temp[2] === \"unmod\") {\n          return \"catalog__second-level-unmod\"\n        } else if (temp[2] && temp[2] === \"noDisplay\") {\n          return \"catalog__second-level-delete\"\n        } else {\n          return \"catalog_second-level\"\n        }\n    } else {\n      return \"admin__nonDisplay\"\n    }\n  }\n\n  catalogFindGlobal (temp) {\n    if (!this.state.find){\n      return \"catalog_global-level\"\n    } else if(temp.join(\" \").toLowerCase().indexOf(this.state.find.toLowerCase()) !== -1) {\n      return \"catalog_global-level\"\n    } else {\n      return \"admin__nonDisplay\"\n    }\n    \n  }\n  catalogFindFirst (temp) {\n    if (!this.state.find){\n      return \"catalog_first-level\"\n    } else if(temp.join(\" \").toLowerCase().indexOf(this.state.find.toLowerCase()) !== -1) {\n      return \"catalog_first-level\"\n    } else {\n      return \"admin__nonDisplay\"\n    }\n    \n  }\n\n\n  modInfo(second) {\n    if(second[2] && second[2] === \"unmod\"){\n      return \" (На проверке)\"\n    } else if(second[2] && second[2] === \"noDisplay\"){}\n  }  \n  displayList(first){\n    return( \n      first.map( second  =>\n        <div key={second} className={this.catalog_finded(second)}>\n          <Link\n          to={\"/Article/\"+second[1]}>{second[0]}</Link>\n          {this.modInfo(second)}\n          <div className=\"catalog__reit\" >{\"(\"+second[3]+\")\"}</div>\n          \n        </div>\n      )\n    )\n  }\n  FindFormHandler = ( title: string ) => {\n    this.setState({ find: title })\n  }\n  \n  render() {\n    const { strings, currentLanguageCode } = this.props;\n    if (this.state.loading) {\n      return (\n        <>\n        <div className=\"cssload-container\">\n            <div className=\"cssload-zenith\"></div>\n        </div>\n        </>\n      )\n    \n    } else return(   \n      <>\n      <div className=\"catalog\">\n\n        <h1> {strings[\"catalog\"]} </h1>\n          <FindForm onAdd={this.FindFormHandler} strings={strings[\"find\"]}/>\n          <div className=\"catalog__container\">\n          { \n            this.state.catalog.map( global  =>\n              <div key={global} className={this.catalogFindGlobal(global)}>\n                <h2 >{global[0]}</h2>\n                { \n                  global.slice(1).map( first  =>\n                    <div key={first} className={this.catalogFindFirst(first)}>\n                      <h4>{first[0]}</h4>\n                      {this.displayList(first[1])}\n                    </div>\n                  )\n                }\n              </div>\n            )\n          }\n          </div>\n\n        \n      </div>\n      </>\n    );\n  }\n}\nconst Catalog = connect()(multilanguage(PRECatalog));\nexport default Catalog;"]},"metadata":{},"sourceType":"module"}