{"ast":null,"code":"import _classCallCheck from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import deletePNG from\"./../img/delete.png\";import upgradePNG from\"./../img/upgrade.png\";import Service from'./../Service';var service=new Service();var AdminNewArticles=/*#__PURE__*/function(_Component){_inherits(AdminNewArticles,_Component);var _super=_createSuper(AdminNewArticles);function AdminNewArticles(props){var _this;_classCallCheck(this,AdminNewArticles);_this=_super.call(this,props);_this.goodStateUpdate=_this.goodStateUpdate.bind(_assertThisInitialized(_this));_this.badStateUpdate=_this.badStateUpdate.bind(_assertThisInitialized(_this));_this.state={catalog:[],type:\"newArticles\",newArticles:[],selectedArticle:0,article:[],reload:false,loading:true};return _this;}_createClass(AdminNewArticles,[{key:\"componentDidMount\",value:function componentDidMount(){var self=this;service.getCatalog().then(function(result){var arr=[];for(var i=0;i<result.length;i++){for(var j=1;j<result[i].length;j++){for(var z=0;z<result[i][j][1].length;z++){if(result[i][j][1][z][2]&&result[i][j][1][z][2]===\"unmod\"){arr.push([result[i][j][1][z],result[i][0],result[i][j][0]]);}}}}if(arr.length!==0){service.getArticle({id:arr[0][0][1].toString()}).then(function(result_article){self.setState({article:result_article,catalog:result,newArticles:arr,selectedArticle:arr.length>0?0:-1,loading:false});});}else{self.setState({loading:false});}});}},{key:\"type_change\",value:function type_change(event){this.setState({type:event.target.value});}},{key:\"goodStateUpdate\",value:function goodStateUpdate(){if(this.state.newArticles){this.setState({loading:true});var raw={\"id\":this.state.newArticles[this.state.selectedArticle]};var self=this;service.goodArticleUpdate(raw).then(function(result){window.location.reload();self.setState({loading:false});});}}},{key:\"badStateUpdate\",value:function badStateUpdate(){if(this.state.newArticles){this.setState({loading:true});var raw={\"id\":this.state.newArticles[this.state.selectedArticle]};var self=this;service.badArticleUpdate(raw).then(function(result){window.location.reload();self.setState({loading:false});});}}},{key:\"render\",value:function render(){var newArticlesState=this.state.type===\"newArticles\"?\"\":\"admin__nonDisplay\";if(this.state.loading){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"cssload-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"cssload-zenith\"})));}else if(this.state.newArticles.length===0){return\"Нет новых статей\";}else return/*#__PURE__*/React.createElement(\"div\",{className:\"admin__container\"},/*#__PURE__*/React.createElement(\"div\",{className:newArticlesState},/*#__PURE__*/React.createElement(\"div\",{className:\"admin__newArticlesSelectorBlock\"},/*#__PURE__*/React.createElement(\"img\",{className:\"admin__selector\",alt:\"delete\",onClick:this.badStateUpdate,src:deletePNG}),/*#__PURE__*/React.createElement(\"img\",{className:\"admin__selector\",alt:\"upgrade\",onClick:this.goodStateUpdate,src:upgradePNG})),/*#__PURE__*/React.createElement(\"div\",{className:\"admin__grade\"},\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"admin__selectedArticle\"},/*#__PURE__*/React.createElement(\"table\",null,this.state.article.map(function(second){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\" \",second[0],\" \"),/*#__PURE__*/React.createElement(\"td\",null,\" \",second[1],\" \"));})))));}}]);return AdminNewArticles;}(Component);export default AdminNewArticles;","map":{"version":3,"sources":["/home/oem/React/ServiceOfTutorials/frontend/src/AdminElements/AdminNewArticles.js"],"names":["React","Component","deletePNG","upgradePNG","Service","service","AdminNewArticles","props","goodStateUpdate","bind","badStateUpdate","state","catalog","type","newArticles","selectedArticle","article","reload","loading","self","getCatalog","then","result","arr","i","length","j","z","push","getArticle","id","toString","result_article","setState","event","target","value","raw","goodArticleUpdate","window","location","badArticleUpdate","newArticlesState","map","second"],"mappings":"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","sourcesContent":["import  React, { Component }  from 'react';\n\n\nimport  deletePNG from \"./../img/delete.png\";\nimport  upgradePNG from \"./../img/upgrade.png\";\nimport  Service  from  './../Service';\n\n\n\nconst  service  =  new  Service();\n\n\nclass AdminNewArticles extends Component{\n\n  constructor(props) {\n    super(props);\n    this.goodStateUpdate = this.goodStateUpdate.bind(this)\n    this.badStateUpdate = this.badStateUpdate.bind(this)\n    this.state = {\n      catalog: [],\n      type: \"newArticles\",\n      newArticles: [],\n      selectedArticle: 0,\n      article: [],\n      reload: false,\n      loading: true\n    };\n  }\n  componentDidMount(){\n    var  self  =  this;\n    service.getCatalog().then(function (result) {\n      let arr = []\n      for (let i=0; i<result.length; i++){\n        for (let j=1; j<result[i].length; j++){  \n          for (let z=0; z<result[i][j][1].length; z++){\n\n              if (result[i][j][1][z][2] && result[i][j][1][z][2] === \"unmod\"){\n                arr.push([result[i][j][1][z], result[i][0], result[i][j][0]])\n              }\n          \n          }\n        }\n      }\n     if (arr.length!==0) {\n        service.getArticle({id: arr[0][0][1].toString()}).then(function (result_article) {\n          self.setState({    \n            article: result_article,\n            catalog: result,\n            newArticles: arr,\n            selectedArticle: arr.length > 0 ? 0 : -1,\n            loading:false\n          })\n        });\n        \n        } else {\n          self.setState({loading:false})\n        }   \n    });\n  }\n\n\n\n  type_change(event) {\n    this.setState({type: event.target.value})\n  }\n  \n\n  goodStateUpdate(){\n    if(this.state.newArticles){\n      \n      this.setState({loading: true})\n      var raw = {\"id\": this.state.newArticles[this.state.selectedArticle]};\n      var  self  =  this;\n      service.goodArticleUpdate(raw).then(function (result) {\n        window.location.reload();\n        self.setState({loading: false})\n      })\n    }\n  }\n  badStateUpdate(){\n    if(this.state.newArticles){\n      \n      this.setState({loading: true})\n      var raw = {\"id\": this.state.newArticles[this.state.selectedArticle]};\n      var  self  =  this;\n      service.badArticleUpdate(raw).then(function (result) {\n        window.location.reload()\n        self.setState({loading: false})\n      })\n    }\n  }\n\n\n  render() {\n    let newArticlesState = this.state.type === \"newArticles\"\n    ? \"\"\n    : \"admin__nonDisplay\"\n    if (this.state.loading) {\n      return (\n        <>\n        <div className=\"cssload-container\">\n            <div className=\"cssload-zenith\"></div>\n        </div>\n        </>\n      )\n    \n    } else if(this.state.newArticles.length===0){\n      return(\"Нет новых статей\")\n\n    } else return(\n      <div className=\"admin__container\">\n\n\n\n\n        <div className={newArticlesState}>\n          <div className=\"admin__newArticlesSelectorBlock\">      \n            <img \n              className=\"admin__selector\"     \n              alt=\"delete\"\n\n              onClick={this.badStateUpdate}\n              src={deletePNG}/>            \n            <img \n              className=\"admin__selector\"     \n              alt=\"upgrade\"\n              onClick={this.goodStateUpdate}\n              src={upgradePNG}/>\n          </div>\n\n          <div className=\"admin__grade\"> </div>\n\n          <div className=\"admin__selectedArticle\">\n            <table>\n                      { \n                        this.state.article.map( second  =>\n                          <tr> \n                            <td> {second[0]} </td>\n                            <td> {second[1]} </td>\n                          </tr>\n                          \n                        )\n                      }\n            </table>\n          </div>\n\n        </div>\n\n\n\n\n\n\n      </div>\n    );\n  }\n}\n\nexport default AdminNewArticles;\n"]},"metadata":{},"sourceType":"module"}