{"ast":null,"code":"var _jsxFileName = \"/home/oem/React/ServiceOfTutorials/admin/src/CreateArticle.tsx\";\nimport React, { Component } from 'react';\nimport Service from './Service';\nimport ArticleCreator from './CreateArticlesElements/ArticleCreator';\nimport { FirstSelect } from './CreateArticlesElements/firstSelect.tsx';\nimport { SecondSelect } from './CreateArticlesElements/SecondSelect.tsx';\nconst service = new Service();\n\nclass CreateArticle extends Component {\n  constructor(props) {\n    super(props);\n\n    this.first_change = title => {\n      let target;\n      this.state.catalog.forEach(temp => {\n        if (title === temp[0]) target = temp.slice(1);\n      });\n      this.setState({\n        second_steck: target,\n        first_value: title\n      });\n    };\n\n    this.second_change = title => {\n      this.setState({\n        second_value: title\n      });\n    };\n\n    this.first_change = this.first_change.bind(this);\n    this.second_change = this.second_change.bind(this);\n    let catalog = [];\n\n    if (localStorage.getItem('catalog')) {\n      catalog = JSON.parse(localStorage.getItem('catalog'));\n    }\n\n    this.state = {\n      catalog: catalog,\n      first_value: \"\",\n      second_value: \"selected\",\n      second_steck: [],\n      new_article: [],\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    var self = this;\n    service.getCatalog({\n      leng: \"ru\"\n    }).then(function (result) {\n      self.setState({\n        catalog: result,\n        loading: false\n      });\n    });\n  }\n\n  publicateArticle() {\n    if (this.state.new_article[0][1] !== \"header\") {\n      alert(\"Статья должна начинаться с Заголовока\");\n    } else {\n      this.setState({\n        loading: true\n      });\n      var self = this;\n      var raw = {\n        \"type\": this.state.first_value,\n        \"under_type\": this.state.second_value.toString(),\n        \"article\": this.state.new_article\n      };\n      service.createArticle(raw).then(function (result) {\n        self.setState({\n          loading: false\n        });\n        alert(\"Статья добавлена, и на ходится на модерации,спасибо, удачного дня!)\");\n        window.location.reload();\n      });\n    }\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cssload-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cssload-zenith\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }\n      })));\n    } else return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"create-article__container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(FirstSelect, {\n      catalog: this.state.catalog,\n      firstChange: this.first_change,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(SecondSelect, {\n      catalog: this.state.second_steck,\n      secondChange: this.second_change,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(ArticleCreator, {\n      type: this.state.first_value,\n      under_type: this.state.second_value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default CreateArticle;","map":{"version":3,"sources":["/home/oem/React/ServiceOfTutorials/admin/src/CreateArticle.tsx"],"names":["React","Component","Service","ArticleCreator","FirstSelect","SecondSelect","service","CreateArticle","constructor","props","first_change","title","target","state","catalog","forEach","temp","slice","setState","second_steck","first_value","second_change","second_value","bind","localStorage","getItem","JSON","parse","new_article","loading","componentDidMount","self","getCatalog","leng","then","result","publicateArticle","alert","raw","toString","createArticle","window","location","reload","render"],"mappings":"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","sourcesContent":["import  React, { Component }  from 'react';\n\nimport  Service  from  './Service';\nimport  ArticleCreator  from  './CreateArticlesElements/ArticleCreator';\nimport  { FirstSelect } from './CreateArticlesElements/firstSelect.tsx'\nimport  { SecondSelect } from './CreateArticlesElements/SecondSelect.tsx'\nconst  service  =  new  Service();\n\ninterface ParentState {\n  catalog:any[];\n  loading: boolean;\n  first_value: string;\n  second_value: string;\n  second_steck: any[];\n  new_article: any[];\n}\n\nclass CreateArticle extends Component<{}, ParentState>{\n\n  constructor(props) {\n    super(props);\n    this.first_change = this.first_change.bind(this)\n    this.second_change = this.second_change.bind(this)\n   \n\n\n    let catalog = []\n    if(localStorage.getItem('catalog')){\n      catalog = JSON.parse(localStorage.getItem('catalog'))\n    }\n    this.state = {\n      catalog:  catalog,\n      first_value: \"\",\n      second_value: \"selected\",\n      second_steck: [],\n      new_article: [],\n      loading: true\n    };\n  }\n  componentDidMount(){\n    var  self  =  this;\n    service.getCatalog({leng: \"ru\"}).then(function (result) {\n      self.setState({ catalog: result, loading: false })\n    })\n\n  }\n  \n  first_change  = ( title: string ) =>  {\n    let target : any[];\n    this.state.catalog.forEach( temp =>\n      {if(title === temp[0]) target = temp.slice(1)}\n    )\n\n    this.setState({\n      second_steck: target,\n      first_value: title\n    })\n  }\n\n  second_change  = ( title: string ) =>  {\n    this.setState({second_value: title});\n  }\n  \n\n  publicateArticle(){\n\n    if (this.state.new_article[0][1] !== \"header\") {\n      alert(\"Статья должна начинаться с Заголовока\")\n    } else{\n      this.setState({loading: true})\n      var  self  =  this;\n\n      var raw = {\n        \"type\": this.state.first_value,\n        \"under_type\": this.state.second_value.toString(),\n        \"article\": this.state.new_article\n      }\n      service.createArticle(raw).then(function (result) {\n        self.setState({loading:false})\n        alert(\"Статья добавлена, и на ходится на модерации,спасибо, удачного дня!)\")\n        window.location.reload();\n      });\n    }\n  }\n\n  render() {\n\n\n\n\n    if (this.state.loading) {\n      return (\n        <>\n        <div className=\"cssload-container\">\n            <div className=\"cssload-zenith\"></div>\n        </div>\n        </>\n      )\n    \n    }  else return(\n      <div className=\"create-article__container\">\n        <FirstSelect catalog={this.state.catalog} firstChange={this.first_change}/>\n\n        <SecondSelect catalog={this.state.second_steck} secondChange={this.second_change}/>  \n\n        <ArticleCreator type={this.state.first_value} under_type={this.state.second_value} />\n      </div>\n    );\n  }\n}\n\nexport default CreateArticle;\n"]},"metadata":{},"sourceType":"module"}