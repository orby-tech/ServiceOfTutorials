{"ast":null,"code":"var _jsxFileName = \"/home/oem/ServiceOfTutorials/frontend/src/NewArticlesList.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Service from './Service';\nconst service = new Service();\n\nfunction sortfunction(a, b) {\n  return a[0][3] - b[0][3];\n}\n\nclass NewArticles extends Component {\n  constructor(props) {\n    super(props);\n    this.findClick = this.findClick.bind(this);\n    let newArticles = [];\n\n    if (localStorage.getItem('newArticles')) {\n      newArticles = JSON.parse(localStorage.getItem('newArticles'));\n    }\n\n    this.state = {\n      catalog: [],\n      find: null,\n      loading: false,\n      NewArticles: newArticles\n    };\n  }\n\n  componentDidMount() {\n    var self = this;\n    service.getCatalog().then(function (result) {\n      self.setState({\n        catalog: result,\n        loading: true\n      });\n      let arr = [];\n      self.state.catalog.map(global => global.splice(1).map(first => first[1].map(second => {\n        console.log(second);\n\n        if (second[1] && second[2] !== \"noDisplay\") {\n          arr.push([[global[0], first[0]].concat(second)]);\n        }\n      })));\n      arr.sort(sortfunction);\n      arr.reverse();\n      console.log(arr);\n      self.setState({\n        NewArticles: arr,\n        loading: false\n      });\n    });\n  }\n\n  catalog_finded(temp) {\n    temp = temp.toLowerCase();\n    let str = this.state.find ? this.state.find.toLowerCase() : null;\n    return temp.indexOf(str) !== -1 ? \"catalog__finded-style\" : \"\";\n  }\n\n  findClick() {\n    this.setState({\n      find: document.getElementById(\"catalog__input-find-group\").value\n    });\n  }\n\n  modStyle(second) {\n    if (second[2] && second[2] === \"unmod\") {\n      return \"catalog__second-level-unmod\";\n    } else if (second[2] && second[2] === \"noDisplay\") {\n      return \"catalog__second-level-delete\";\n    } else {\n      return \"catalog_second-level\";\n    }\n  }\n\n  modInfo(second) {\n    if (second[2] && second[2] === \"unmod\") {\n      return \" (На проверке)\";\n    } else if (second[2] && second[2] === \"noDisplay\") {}\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cssload-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cssload-zenith\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }\n      })));\n    } else return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"catalog\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }\n    }, \" \\u041D\\u043E\\u0432\\u044B\\u0435 \\u0441\\u0442\\u0430\\u0442\\u044C\\u0438 \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"catalog__header-find-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, \" \\u041D\\u0430\\u0439\\u0442\\u0438 \\u0432 \\u043A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\\u0435:\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control catalog__input-find-group\",\n      id: \"catalog__input-find-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"form-control catalog__button-find-group\",\n      onClick: this.findClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }, \"\\u041D\\u0430\\u0439\\u0442\\u0438\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }), this.state.NewArticles.map(global => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"newArticlesList__article\",\n      key: global,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"newArticlesList__link\",\n      to: \"/Article/\" + global[0][3],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, global[0][2]), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"newArticlesList__context\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    }, global[0][1], \" (\", global[0][0], \") \\u0440\\u0435\\u0439\\u0442\\u0438\\u043D\\u0433:  \", global[0][5]))));\n  }\n\n}\n\nexport default NewArticles;","map":{"version":3,"sources":["/home/oem/ServiceOfTutorials/frontend/src/NewArticlesList.js"],"names":["React","Component","Link","Service","service","sortfunction","a","b","NewArticles","constructor","props","findClick","bind","newArticles","localStorage","getItem","JSON","parse","state","catalog","find","loading","componentDidMount","self","getCatalog","then","result","setState","arr","map","global","splice","first","second","console","log","push","concat","sort","reverse","catalog_finded","temp","toLowerCase","str","indexOf","document","getElementById","value","modStyle","modInfo","render"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react';\n\nimport { Link } from 'react-router-dom';\nimport  Service  from  './Service';\n\n\nconst  service  =  new  Service();\n\n\nfunction sortfunction(a, b){\n  return (a[0][3] - b[0][3])\n  }\n\nclass NewArticles extends Component{\n  constructor(props) {\n    super(props);\n    this.findClick = this.findClick.bind(this)\n\n    \n    let newArticles = []\n    if(localStorage.getItem('newArticles')){\n      newArticles = JSON.parse(localStorage.getItem('newArticles'))\n    }\n    this.state = {\n      catalog: [],\n      find: null,\n      loading: false,\n      NewArticles: newArticles,\n    }\n  }\n\n\n  componentDidMount(){\n    var  self  =  this;\n    service.getCatalog().then(function (result) {\n      self.setState({ catalog: result, loading: true })\n        let arr = []\n        self.state.catalog.map( global=>\n            global.splice(1).map( first => \n                first[1].map( second  => {\n                  console.log(second)\n                    if(second[1] && second[2] !== \"noDisplay\"){\n                            arr.push([[global[0], first[0]].concat(second)])\n                    }\n                })   \n            )\n        )\n        arr.sort(sortfunction)\n        arr.reverse()\n        console.log(arr)\n        self.setState({NewArticles: arr, loading: false})\n    });\n  }\n\n\n  catalog_finded(temp) {\n    temp= temp.toLowerCase()\n    let str = this.state.find ? this.state.find.toLowerCase() : null\n    return temp.indexOf(str) !== -1 ? \"catalog__finded-style\" : \"\"\n  }\n\n\n  findClick(){\n    this.setState({find: document.getElementById(\"catalog__input-find-group\").value})\n  }\n\n\n  modStyle(second) {\n    if (second[2] && second[2] === \"unmod\") {\n      return \"catalog__second-level-unmod\"\n    } else if (second[2] && second[2] === \"noDisplay\") {\n      return \"catalog__second-level-delete\"\n    } else {\n      return \"catalog_second-level\"\n    }\n  }\n\n\n  modInfo(second) {\n    if(second[2] && second[2] === \"unmod\"){\n      return \" (На проверке)\"\n    } else if(second[2] && second[2] === \"noDisplay\"){}\n  }  \n\n  \n  render() {\n    if (this.state.loading) {\n      return (\n        <>\n        <div className=\"cssload-container\">\n            <div className=\"cssload-zenith\"></div>\n        </div>\n        </>\n      )\n    \n    } else return(   \n      <div className=\"catalog\">\n\n        <h1> Новые статьи </h1>\n          <div className=\"catalog__header-find-group\"> Найти в каталоге:</div>\n          <input className=\"form-control catalog__input-find-group\"\n                  id=\"catalog__input-find-group\"/>\n          <button className=\"form-control catalog__button-find-group\"\n                  onClick={this.findClick}>\n            Найти\n          </button>\n          <div/>\n          { \n            this.state.NewArticles.map( global  =>\n                <div className=\"newArticlesList__article\" key={global}> \n                    <Link className=\"newArticlesList__link\" to={\"/Article/\"+global[0][3]}>{global[0][2]}</Link> \n                    <p className=\"newArticlesList__context\">{global[0][1]} ({global[0][0]}) рейтинг:  { global[0][5]}</p>\n                </div>\n            )\n          }\n\n      </div>\n    );\n  }\n}\n\nexport default NewArticles;"]},"metadata":{},"sourceType":"module"}