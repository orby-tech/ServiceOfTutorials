{"ast":null,"code":"import _toConsumableArray from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Service from'./../Service';import editPNG from\"./../img/edit.png\";import trashPNG from\"./../img/trash.png\";import append from\"./../img/plus.png\";var service=new Service();var ArticleCreator=/*#__PURE__*/function(_Component){_inherits(ArticleCreator,_Component);var _super=_createSuper(ArticleCreator);function ArticleCreator(props){var _this;_classCallCheck(this,ArticleCreator);_this=_super.call(this,props);_this.deleteElement=_this.deleteElement.bind(_assertThisInitialized(_this));_this.appendElement=_this.appendElement.bind(_assertThisInitialized(_this));_this.temp_type_change=_this.temp_type_change.bind(_assertThisInitialized(_this));_this.publicateArticle=_this.publicateArticle.bind(_assertThisInitialized(_this));_this.state={article:[],status:null,edit:null,temp_type:null};return _this;}_createClass(ArticleCreator,[{key:\"styleOfArticle\",value:function styleOfArticle(key){if(!key){}else if(key[1]===\"code\"){return/*#__PURE__*/React.createElement(\"div\",{key:key,className:\"article__code\"},key[0]);}else if(key[1]===\"text\"){return/*#__PURE__*/React.createElement(\"div\",{key:key,className:\"article__text\"},key[0]);}else if(key[1]===\"link\"){return/*#__PURE__*/React.createElement(\"div\",{key:key,className:\"article__link\"},/*#__PURE__*/React.createElement(\"a\",{href:key[2]},\" \",key[0]));}else if(key[1]===\"header\"){return/*#__PURE__*/React.createElement(\"div\",{key:key,className:\"article__header\"},key[0]);}}},{key:\"deleteElement\",value:function deleteElement(id){this.setState(function(_ref){var article=_ref.article;var newArray=[].concat(_toConsumableArray(article.slice(0,id)),_toConsumableArray(article.slice(id+1)));return{article:newArray};});}},{key:\"editElement\",value:function editElement(id){this.setState({edit:this.state.article[id],status:\"edit\",temp_type:this.state.article[id][1]});}},{key:\"appendElement\",value:function appendElement(id){if(id!==-2){this.setState({edit:this.state.article[id],status:\"append\",temp_type:null});}else{this.setState({edit:[],status:\"append\",temp_type:null});}}},{key:\"addBlock\",value:function addBlock(id){console.log(id);var type=this.state.temp_type;var textFromForm=document.getElementById(\"textInputFromRedaction\").value;var arr=this.state.article;console.log(arr);var temp_arr=[];console.log(type);if(type!==\"selected\"&&document.getElementById(\"textInputFromRedaction\").value!==\"\"){if(type===\"link\"){var link=document.getElementById(\"linkInputFromRedaction\").value;temp_arr=[textFromForm,type,link];document.getElementById(\"linkInputFromRedaction\").value=\"\";}else{temp_arr=[textFromForm,type];}if(-1!==id){arr=[].concat(_toConsumableArray(arr.slice(0,id)),[temp_arr],_toConsumableArray(arr.slice(id)));}else{arr.push(temp_arr);}document.getElementById(\"textInputFromRedaction\").value=\"\";this.setState({article:arr,status:null});console.log(arr);}else if(!type||type===\"selected\"){alert(\"Укажите тип блока\");}else if(!textFromForm||textFromForm===\"\"){alert(\"Заполните пожалуйста все поля\");}}},{key:\"redactionBlock\",value:function redactionBlock(id){console.log(id);var type=this.state.temp_type;var textFromForm=document.getElementById(\"textInputFromRedaction\").value;var arr=this.state.article;console.log(type);if(type!==\"selected\"&&document.getElementById(\"textInputFromRedaction\").value!==\"\"){if(type===\"link\"){var link=document.getElementById(\"linkInputFromRedaction\").value;arr[id]=[textFromForm,type,link];document.getElementById(\"linkInputFromRedaction\").value=\"\";}else{arr[id]=[textFromForm,type];}document.getElementById(\"textInputFromRedaction\").value=\"\";this.setState({article:arr,status:null});}else if(!type||type===\"selected\"){alert(\"Укажите тип блока\");}else if(!textFromForm||textFromForm===\"\"){alert(\"Заполните пожалуйста все поля\");}}},{key:\"styleOfRedactionInput\",value:function styleOfRedactionInput(moment){if(this.state.temp_type===\"link\"){return\"create-article__type-new-block-link form-control create-article__input\";}else{return\"create-article__non-display\";}}},{key:\"temp_type_change\",value:function temp_type_change(event){this.setState({temp_type:event.target.value});}},{key:\"publicateArticle\",value:function publicateArticle(){if(this.state.article[0][1]!==\"header\"){alert(\"Статья должна начинаться с Заголовока\");}else{this.setState({loading:true});var self=this;var raw={\"type\":this.props.type,\"under_type\":this.props.under_type.toString(),\"article\":this.state.article};service.createArticle(raw).then(function(result){self.setState({loading:false});alert(\"Статья добавлена, и на ходится на модерации,спасибо, удачного дня!)\");window.location.reload();});}}},{key:\"render\",value:function render(){var _this2=this;var styleOfCreatorBlock=this.props.under_type!==\"selected\"?\"article__container\":\"create-article__non-display\";if(this.state.status===\"edit\"){var moment=this.state.edit;return/*#__PURE__*/React.createElement(\"div\",{className:\"article__container\"},this.styleOfArticle(moment),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h3\",null,\" \\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \"),/*#__PURE__*/React.createElement(\"select\",{className:\"create-article__choose-type custom-select mr-sm-2 create-article__input\",id:\"inlineFormCustomSelect\",onChange:this.temp_type_change},/*#__PURE__*/React.createElement(\"option\",{value:\"selected\"},\"\\u0422\\u0438\\u043F \\u0431\\u043B\\u043E\\u043A\\u0430\"),/*#__PURE__*/React.createElement(\"option\",{value:\"header\"},\"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\"),/*#__PURE__*/React.createElement(\"option\",{value:\"text\"},\"\\u0422\\u0435\\u043A\\u0441\\u0442\"),/*#__PURE__*/React.createElement(\"option\",{value:\"code\"},\"\\u041A\\u043E\\u0434\"),/*#__PURE__*/React.createElement(\"option\",{value:\"link\"},\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430\")),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control create-article__input\",id:\"textInputFromRedaction\"}),/*#__PURE__*/React.createElement(\"input\",{className:this.styleOfRedactionInput(moment),id:\"linkInputFromRedaction\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"create-article__create-button\",onClick:function onClick(){return _this2.redactionBlock(_this2.state.article.indexOf(moment));}},\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0431\\u043B\\u043E\\u043A\"));}else if(this.state.status===\"append\"){var _moment=this.state.edit;return/*#__PURE__*/React.createElement(\"div\",{className:\"article__container\"},this.styleOfArticle(_moment),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h3\",null,\" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \"),/*#__PURE__*/React.createElement(\"select\",{className:\"create-article__choose-type custom-select mr-sm-2 create-article__input\",id:\"inlineFormCustomSelect\",onChange:this.temp_type_change},/*#__PURE__*/React.createElement(\"option\",{value:\"selected\"},\"\\u0422\\u0438\\u043F \\u0431\\u043B\\u043E\\u043A\\u0430\"),/*#__PURE__*/React.createElement(\"option\",{value:\"header\"},\"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\"),/*#__PURE__*/React.createElement(\"option\",{value:\"text\"},\"\\u0422\\u0435\\u043A\\u0441\\u0442\"),/*#__PURE__*/React.createElement(\"option\",{value:\"code\"},\"\\u041A\\u043E\\u0434\"),/*#__PURE__*/React.createElement(\"option\",{value:\"link\"},\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430\")),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control create-article__input\",id:\"textInputFromRedaction\"}),/*#__PURE__*/React.createElement(\"input\",{className:this.styleOfRedactionInput(_moment),id:\"linkInputFromRedaction\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"create-article__create-button\",onClick:function onClick(){return _this2.addBlock(_this2.state.article.indexOf(_moment));}},\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0431\\u043B\\u043E\\u043A\"));}else return/*#__PURE__*/React.createElement(\"div\",{className:styleOfCreatorBlock},this.state.article.map(function(moment){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{className:\"article__appendButton\",onClick:function onClick(){return _this2.appendElement(_this2.state.article.indexOf(moment));},alt:\"plus\",src:append}),_this2.styleOfArticle(moment),/*#__PURE__*/React.createElement(\"img\",{className:\"article__delButton\",alt:\"delete\",onClick:function onClick(){return _this2.deleteElement(_this2.state.article.indexOf(moment));},src:trashPNG}),/*#__PURE__*/React.createElement(\"img\",{className:\"article__editButton\",alt:\"edit\",onClick:function onClick(){return _this2.editElement(_this2.state.article.indexOf(moment));},src:editPNG}));}),/*#__PURE__*/React.createElement(\"img\",{className:\"article__appendButton\",onClick:function onClick(){return _this2.appendElement(-2);},alt:\"plus\",src:append}),/*#__PURE__*/React.createElement(\"div\",{className:\"create-article__uppend-button\",onClick:this.publicateArticle},\"\\u041E\\u043F\\u0443\\u0431\\u043B\\u0438\\u043A\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u0442\\u0430\\u0442\\u044C\\u044E\"));}}]);return ArticleCreator;}(Component);export default ArticleCreator;","map":{"version":3,"sources":["/home/oem/React/ServiceOfTutorials/frontend/src/CreateArticlesElements/ArticleCreator.js"],"names":["React","Component","Service","editPNG","trashPNG","append","service","ArticleCreator","props","deleteElement","bind","appendElement","temp_type_change","publicateArticle","state","article","status","edit","temp_type","key","id","setState","newArray","slice","console","log","type","textFromForm","document","getElementById","value","arr","temp_arr","link","push","alert","moment","event","target","loading","self","raw","under_type","toString","createArticle","then","result","window","location","reload","styleOfCreatorBlock","styleOfArticle","styleOfRedactionInput","redactionBlock","indexOf","addBlock","map","editElement"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react';\n\nimport  Service  from  './../Service';\n\nimport  editPNG from \"./../img/edit.png\";\nimport  trashPNG from \"./../img/trash.png\";\nimport  append from \"./../img/plus.png\"\n\nconst  service  =  new  Service();\n\nclass ArticleCreator extends Component{\n\n  constructor(props) {\n    super(props);\n    this.deleteElement = this.deleteElement.bind(this)\n    this.appendElement = this.appendElement.bind(this)\n    this.temp_type_change = this.temp_type_change.bind(this)\n    this.publicateArticle = this.publicateArticle.bind(this)\n\n    this.state = {\n      article:  [],\n      status: null,\n      edit: null,\n      temp_type: null\n    };\n  }\n\n\n \n\n  styleOfArticle(key) {\n    if(!key){\n\n    } else if (key[1] === \"code\") {\n      return  (<div key={key} className=\"article__code\">\n                {key[0]}\n              </div>)\n    } else if(key[1] === \"text\"){\n      return (<div key={key} className=\"article__text\">\n                {key[0]}\n              </div>)\n    } else if(key[1] === \"link\"){\n      return (<div key={key} className=\"article__link\">\n                <a href={key[2]}> {key[0]}</a>\n              </div>)\n    } else if(key[1] === \"header\"){\n      return (<div key={key} className=\"article__header\">\n                {key[0]}\n              </div>)\n    }\n  }\n  deleteElement(id) {\n    this.setState(({ article }) => {\n\n      const newArray = [\n        ...article.slice(0, id),\n        ...article.slice(id + 1)\n      ];\n\n      return {\n        article: newArray\n      };\n    });\n  };\n  editElement(id) {\n    this.setState({\n      edit: this.state.article[id],\n      status: \"edit\",\n      temp_type: this.state.article[id][1]\n    })\n  }\n  appendElement(id) {\n    if(id !== -2 ){\n      this.setState({\n        edit: this.state.article[id],\n        status: \"append\",\n        temp_type: null\n      })\n    } else {\n      this.setState({\n        edit: [],\n        status: \"append\",\n        temp_type: null\n      })\n    }\n\n  }\n  addBlock(id) {\n    console.log(id)\n    let type = this.state.temp_type\n    let textFromForm = document.getElementById(\"textInputFromRedaction\").value\n    let arr = this.state.article\n    console.log(arr)\n    let temp_arr = []\n    console.log(type)\n    if (type !== \"selected\" && document.getElementById(\"textInputFromRedaction\").value !== \"\") {\n        if (type === \"link\") {\n          let link = document.getElementById(\"linkInputFromRedaction\").value\n          temp_arr = [textFromForm, type, link]\n          document.getElementById(\"linkInputFromRedaction\").value = \"\"\n        } else {\n          temp_arr = [textFromForm, type]\n        }\n        if(-1 !== id){\n          arr = [\n            ...arr.slice(0, id),\n            ...[temp_arr],\n            ...arr.slice(id )\n          ];\n        } else {\n          arr.push(temp_arr)\n        }\n\n        document.getElementById(\"textInputFromRedaction\").value = \"\"\n        this.setState({\n          article: arr,\n          status: null\n        })\n        console.log(arr)\n    } \n    else if (!type || type === \"selected\"){\n      alert (\"Укажите тип блока\")\n    } \n    else if (!textFromForm || textFromForm === \"\") {\n      alert(\"Заполните пожалуйста все поля\")\n    }\n  }\n  redactionBlock(id) {\n    console.log(id)\n    let type = this.state.temp_type\n    let textFromForm = document.getElementById(\"textInputFromRedaction\").value\n    let arr = this.state.article\n    console.log(type)\n    if (type !== \"selected\" && document.getElementById(\"textInputFromRedaction\").value !== \"\") {\n        if (type === \"link\") {\n          let link = document.getElementById(\"linkInputFromRedaction\").value\n          arr[id]=[textFromForm, type, link]\n          document.getElementById(\"linkInputFromRedaction\").value = \"\"\n        } else {\n          arr[id]=[textFromForm, type]\n        }\n        document.getElementById(\"textInputFromRedaction\").value = \"\"\n        this.setState({\n          article: arr,\n          status: null\n        })\n    } \n    else if (!type || type === \"selected\"){\n      alert (\"Укажите тип блока\")\n    } \n    else if (!textFromForm || textFromForm === \"\") {\n      alert(\"Заполните пожалуйста все поля\")\n    }\n  }\n  styleOfRedactionInput(moment) {\n    if(this.state.temp_type === \"link\"){\n      return \"create-article__type-new-block-link form-control create-article__input\"\n    } else {\n      return \"create-article__non-display\"\n    }\n  }\n  temp_type_change(event) {\n    this.setState({ temp_type: event.target.value })\n  }\n\n\n\n  publicateArticle(){\n\n    if (this.state.article[0][1] !== \"header\") {\n      alert(\"Статья должна начинаться с Заголовока\")\n    } else{\n      this.setState({loading: true})\n      var  self  =  this;\n\n      var raw = {\n        \"type\": this.props.type,\n        \"under_type\": this.props.under_type.toString(),\n        \"article\": this.state.article\n      }\n      service.createArticle(raw).then(function (result) {\n        self.setState({loading:false})\n        alert(\"Статья добавлена, и на ходится на модерации,спасибо, удачного дня!)\")\n        window.location.reload();\n      });\n    }\n  }\n\n\n  render() {\n    let styleOfCreatorBlock = this.props.under_type !== \"selected\"\n    ? \"article__container\"\n    : \"create-article__non-display\"\n\n    if(this.state.status === \"edit\"){\n      let moment = this.state.edit\n      return (\n        <div className=\"article__container\">\n\n        {this.styleOfArticle(moment)}\n        <br/>\n          <h3> Редактировать </h3>\n          <select className=\"create-article__choose-type custom-select mr-sm-2 create-article__input\" \n                  id=\"inlineFormCustomSelect\" \n                  onChange={this.temp_type_change}>\n            <option value=\"selected\">Тип блока</option>            \n            <option value=\"header\">Заголовок</option>\n            <option value=\"text\">Текст</option>\n            <option value=\"code\">Код</option>\n            <option value=\"link\">Ссылка</option>                                  \n          </select>\n          <input className=\"form-control create-article__input\" id=\"textInputFromRedaction\"/>\n          <input className={this.styleOfRedactionInput(moment)} id=\"linkInputFromRedaction\"/>\n          <div  className=\"create-article__create-button\"\n                onClick={() => this.redactionBlock(this.state.article.indexOf(moment))}> \n            Изменить заполненный блок\n          </div>                \n        </div> \n      )\n    } else if(this.state.status === \"append\"){\n      let moment = this.state.edit\n      return (\n        <div className=\"article__container\">\n\n        {this.styleOfArticle(moment)}\n        <br/>\n          <h3> Добавить </h3>\n          <select className=\"create-article__choose-type custom-select mr-sm-2 create-article__input\" \n                  id=\"inlineFormCustomSelect\" \n                  onChange={this.temp_type_change}>\n            <option value=\"selected\">Тип блока</option>            \n            <option value=\"header\">Заголовок</option>\n            <option value=\"text\">Текст</option>\n            <option value=\"code\">Код</option>\n            <option value=\"link\">Ссылка</option>                                  \n          </select>\n          <input className=\"form-control create-article__input\" id=\"textInputFromRedaction\"/>\n          <input className={this.styleOfRedactionInput(moment)} id=\"linkInputFromRedaction\"/>\n          <div  className=\"create-article__create-button\"\n                onClick={() => this.addBlock(this.state.article.indexOf(moment))}> \n            Добавить заполненный блок\n          </div>                \n        </div> \n      )\n    } else  return(\n      <div className={styleOfCreatorBlock}>\n        { \n          this.state.article.map( moment  =>\n            <div>\n              <img \n                className=\"article__appendButton\"\t      \t\t\n                onClick={() => this.appendElement(this.state.article.indexOf(moment))}\n                alt=\"plus\"\n                src={append}/>\n              {this.styleOfArticle(moment)}\n              <img \n                className=\"article__delButton\"     \n                alt=\"delete\"\n                onClick={() => this.deleteElement(this.state.article.indexOf(moment))}\n                src={trashPNG}/>\n              <img \n                className=\"article__editButton\"   \n                alt=\"edit\"\n                onClick={() => this.editElement(this.state.article.indexOf(moment))}\n                src={editPNG}/>   \n            </div>\n          )\n        }\n              <img \n                className=\"article__appendButton\"\t      \t\t\n                onClick={() => this.appendElement(-2)}\n                alt=\"plus\"\n                src={append}/>\n          <div  className=\"create-article__uppend-button\"\n                onClick={this.publicateArticle}> \n            Опубликовать статью \n          </div>\n      </div>\n    );\n  }\n}\n\nexport default ArticleCreator;\n"]},"metadata":{},"sourceType":"module"}