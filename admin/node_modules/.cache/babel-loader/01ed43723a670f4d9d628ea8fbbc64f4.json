{"ast":null,"code":"import _classCallCheck from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Service from'./Service';var service=new Service();var Comments=/*#__PURE__*/function(_Component){_inherits(Comments,_Component);var _super=_createSuper(Comments);function Comments(props){var _this;_classCallCheck(this,Comments);_this=_super.call(this,props);_this.handleShow=_this.handleShow.bind(_assertThisInitialized(_this));_this.closeModal=_this.closeModal.bind(_assertThisInitialized(_this));_this.state={id:_this.props.id,comments:[],showNewComment:false};return _this;}_createClass(Comments,[{key:\"componentDidMount\",value:function componentDidMount(){var self=this;console.log(this.state.id);service.getComments({id:this.state.id}).then(function(result){self.setState({comments:result});console.log(result);});}},{key:\"handleShow\",value:function handleShow(){this.setState({showNewComment:true});}},{key:\"closeModal\",value:function closeModal(){this.setState({showNewComment:false});}},{key:\"delelteComment\",value:function delelteComment(comment){service.deleteComment({comment:comment,article:this.state.id}).then(function(result){alert(\"Комментарий удален\");window.location.reload();});}},{key:\"dateNow\",value:function dateNow(time){var now=Date.now();var days=(now-time)/1000/3600;//24\nif(days<=1){return\"Сегодня\";}else if(days<=3){return\"Не позже трех дней\";}else if(days<=7){return\"В течении недели\";}else if(days<=30){return\"В течении месяца\";}else{return\"Давно\";}}},{key:\"newCommentAppend\",value:function newCommentAppend(){if(document.getElementById(\"newCommentHeader\").value&&document.getElementById(\"newCommentText\").value&&document.getElementById(\"newCommentName\").value){service.appendComment({header:document.getElementById(\"newCommentHeader\").value,text:document.getElementById(\"newCommentText\").value,name:document.getElementById(\"newCommentName\").value,articleId:this.state.id}).then(function(result){alert(\"Спасибо за комментаий!)\");window.location.reload();});}else{alert(\"Все поля должны быть заполнены\");}}},{key:\"render\",value:function render(){var _this2=this;var status=localStorage.getItem('status')===\"god\"?\"\":\"create-article__non-display\";return/*#__PURE__*/React.createElement(\"div\",{className:\"comments__container\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"comments__title\"},\"  \\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0438: \"),this.state.comments.map(function(comment){return/*#__PURE__*/React.createElement(\"div\",{className:\"comments__block\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"comments__header\"},comment.header,\" \"),/*#__PURE__*/React.createElement(\"p\",{className:\"comments__date\"},_this2.dateNow(comment.date)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"comments__text\"},\" \",comment.text,\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"comments__author\"},\" \\u0430\\u0432\\u0442\\u043E\\u0440: \",comment.author,\" \"),/*#__PURE__*/React.createElement(\"button\",{className:status,onClick:function onClick(){return _this2.delelteComment(comment);}}));}),/*#__PURE__*/React.createElement(\"div\",{className:\"newComment__container\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",id:\"newCommentName\",placeholder:\"\\u041A\\u0430\\u043A \\u0432\\u0430\\u0441 \\u0437\\u0432\\u0430\\u0442\\u044C?)\"}),/*#__PURE__*/React.createElement(\"input\",{className:\"newComment__header form-control\",id:\"newCommentHeader\",placeholder:\"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\"}),/*#__PURE__*/React.createElement(\"textarea\",{className:\"newComment__text form-control\",id:\"newCommentText\",type:\"text\",placeholder:\"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"newComment__uppend btn btn-success\",onClick:function onClick(){return _this2.newCommentAppend();}},\" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \")));}}]);return Comments;}(Component);export default Comments;","map":{"version":3,"sources":["/home/oem/React/ServiceOfTutorials/frontend/src/Comments.js"],"names":["React","Component","Service","service","Comments","props","handleShow","bind","closeModal","state","id","comments","showNewComment","self","console","log","getComments","then","result","setState","comment","deleteComment","article","alert","window","location","reload","time","now","Date","days","document","getElementById","value","appendComment","header","text","name","articleId","status","localStorage","getItem","map","dateNow","date","author","delelteComment","newCommentAppend"],"mappings":"0yBAAA,MAAQA,CAAAA,KAAR,EAAiBC,SAAjB,KAAmC,OAAnC,CAEA,MAAQC,CAAAA,OAAR,KAAuB,WAAvB,CAEA,GAAOC,CAAAA,OAAO,CAAK,GAAKD,CAAAA,OAAL,EAAnB,C,GAGME,CAAAA,Q,oGAEJ,kBAAYC,KAAZ,CAAmB,0CACjB,uBAAMA,KAAN,EACA,MAAKC,UAAL,CAAkB,MAAKA,UAAL,CAAgBC,IAAhB,+BAAlB,CACA,MAAKC,UAAL,CAAkB,MAAKA,UAAL,CAAgBD,IAAhB,+BAAlB,CACA,MAAKE,KAAL,CAAa,CACXC,EAAE,CAAE,MAAKL,KAAL,CAAWK,EADJ,CAEXC,QAAQ,CAAE,EAFC,CAGXC,cAAc,CAAE,KAHL,CAAb,CAJiB,aASlB,C,kFACkB,CACjB,GAAKC,CAAAA,IAAI,CAAK,IAAd,CACAC,OAAO,CAACC,GAAR,CAAY,KAAKN,KAAL,CAAWC,EAAvB,EACAP,OAAO,CAACa,WAAR,CAAoB,CAACN,EAAE,CAAE,KAAKD,KAAL,CAAWC,EAAhB,CAApB,EAAyCO,IAAzC,CAA8C,SAAUC,MAAV,CAAkB,CAC9DL,IAAI,CAACM,QAAL,CAAc,CAAER,QAAQ,CAAEO,MAAZ,CAAd,EACAJ,OAAO,CAACC,GAAR,CAAYG,MAAZ,EACD,CAHD,EAID,C,+CACW,CACV,KAAKC,QAAL,CAAc,CAACP,cAAc,CAAE,IAAjB,CAAd,EACD,C,+CACW,CACV,KAAKO,QAAL,CAAc,CAACP,cAAc,CAAE,KAAjB,CAAd,EACD,C,sDACcQ,O,CAAQ,CACrBjB,OAAO,CAACkB,aAAR,CAAsB,CAAED,OAAO,CAAEA,OAAX,CAAoBE,OAAO,CAAE,KAAKb,KAAL,CAAWC,EAAxC,CAAtB,EAAoEO,IAApE,CAAyE,SAAUC,MAAV,CAAkB,CAEzFK,KAAK,CAAC,oBAAD,CAAL,CACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACD,CAJD,EAKD,C,wCACOC,I,CAAK,CACX,GAAIC,CAAAA,GAAG,CAAGC,IAAI,CAACD,GAAL,EAAV,CACA,GAAIE,CAAAA,IAAI,CAAG,CAACF,GAAG,CAAGD,IAAP,EAAa,IAAb,CAAkB,IAA7B,CAAiC;AACjC,GAAIG,IAAI,EAAI,CAAZ,CAAc,CACZ,MAAO,SAAP,CACD,CAFD,IAEO,IAAGA,IAAI,EAAI,CAAX,CAAa,CAClB,MAAO,oBAAP,CACD,CAFM,IAEA,IAAGA,IAAI,EAAI,CAAX,CAAa,CAClB,MAAO,kBAAP,CACD,CAFM,IAEA,IAAGA,IAAI,EAAI,EAAX,CAAc,CACnB,MAAO,kBAAP,CACD,CAFM,IAEA,CACL,MAAO,OAAP,CACD,CACF,C,2DACiB,CAChB,GAAGC,QAAQ,CAACC,cAAT,CAAwB,kBAAxB,EAA4CC,KAA5C,EACDF,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KADzC,EAEDF,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAF5C,CAEkD,CAEhD9B,OAAO,CAAC+B,aAAR,CAAsB,CACpBC,MAAM,CAAEJ,QAAQ,CAACC,cAAT,CAAwB,kBAAxB,EAA4CC,KADhC,CAEpBG,IAAI,CAAEL,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAF5B,CAGpBI,IAAI,CAAEN,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAH5B,CAIpBK,SAAS,CAAE,KAAK7B,KAAL,CAAWC,EAJF,CAAtB,EAKGO,IALH,CAKQ,SAAUC,MAAV,CAAkB,CACxBK,KAAK,CAAC,yBAAD,CAAL,CACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACD,CARD,EAUD,CAdD,IAcO,CACLH,KAAK,CAAC,gCAAD,CAAL,CACD,CACF,C,uCAGQ,iBACP,GAAIgB,CAAAA,MAAM,CAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,IAAmC,KAAnC,CAA2C,EAA3C,CAAgD,6BAA7D,CACA,mBACE,2BAAK,SAAS,CAAC,qBAAf,eACE,0BAAI,SAAS,CAAC,iBAAd,2EADF,CAGI,KAAKhC,KAAL,CAAWE,QAAX,CAAoB+B,GAApB,CAAwB,SAAAtB,OAAO,qBAC7B,2BAAK,SAAS,CAAC,iBAAf,eACE,0BAAI,SAAS,CAAC,kBAAd,EAAkCA,OAAO,CAACe,MAA1C,KADF,cAEE,yBAAG,SAAS,CAAC,gBAAb,EAA+B,MAAI,CAACQ,OAAL,CAAavB,OAAO,CAACwB,IAArB,CAA/B,CAFF,cAGE,8BAHF,cAIE,2BAAK,SAAS,CAAC,gBAAf,MAAkCxB,OAAO,CAACgB,IAA1C,KAJF,cAKE,2BAAK,SAAS,CAAC,kBAAf,sCAA2ChB,OAAO,CAACyB,MAAnD,KALF,cAME,8BAAQ,SAAS,CAAEN,MAAnB,CAA2B,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACO,cAAL,CAAoB1B,OAApB,CAAN,EAApC,EANF,CAD6B,EAA/B,CAHJ,cAgBE,2BAAK,SAAS,CAAC,uBAAf,eACE,mGADF,cAEI,6BAAO,SAAS,CAAC,cAAjB,CAAgC,EAAE,CAAC,gBAAnC,CAAoD,WAAW,CAAC,wEAAhE,EAFJ,cAGI,6BAAO,SAAS,CAAC,iCAAjB,CAAmD,EAAE,CAAC,kBAAtD,CAAyE,WAAW,CAAC,wDAArF,EAHJ,cAII,gCAAU,SAAS,CAAC,+BAApB,CAAoD,EAAE,CAAC,gBAAvD,CAAwE,IAAI,CAAC,MAA7E,CAAoF,WAAW,CAAC,oEAAhG,EAJJ,cAKI,8BAAQ,SAAS,CAAC,oCAAlB,CAAuD,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC2B,gBAAL,EAAN,EAAhE,uDALJ,CAhBF,CADF,CA6BD,C,sBApGoB9C,S,EAuGvB,cAAeG,CAAAA,QAAf","sourcesContent":["import  React, { Component }  from 'react';\n\nimport  Service  from  './Service';\n\nconst  service  =  new  Service();\n\n\nclass Comments extends Component{\n\n  constructor(props) {\n    super(props);\n    this.handleShow = this.handleShow.bind(this)\n    this.closeModal = this.closeModal.bind(this)\n    this.state = {\n      id: this.props.id,\n      comments: [],\n      showNewComment: false \n    };\n  }\n  componentDidMount(){\n    var  self  =  this;\n    console.log(this.state.id)\n    service.getComments({id: this.state.id}).then(function (result) {\n      self.setState({ comments: result })\n      console.log(result)\n    });\n  }\n  handleShow(){\n    this.setState({showNewComment: true})\n  }\n  closeModal(){\n    this.setState({showNewComment: false})\n  }\n  delelteComment(comment){\n    service.deleteComment({ comment: comment, article: this.state.id }).then(function (result) {\n\n      alert(\"Комментарий удален\")\n      window.location.reload()\n    });\n  }\n  dateNow(time){\n    let now = Date.now()\n    let days = (now - time)/1000/3600//24\n    if (days <= 1){\n      return \"Сегодня\"\n    } else if(days <= 3){\n      return \"Не позже трех дней\"\n    } else if(days <= 7){\n      return \"В течении недели\"\n    } else if(days <= 30){\n      return \"В течении месяца\"\n    } else {\n      return \"Давно\"\n    }\n  }\n  newCommentAppend(){\n    if(document.getElementById(\"newCommentHeader\").value &&\n      document.getElementById(\"newCommentText\").value &&\n      document.getElementById(\"newCommentName\").value){\n\n      service.appendComment({\n        header: document.getElementById(\"newCommentHeader\").value,\n        text: document.getElementById(\"newCommentText\").value,\n        name: document.getElementById(\"newCommentName\").value,\n        articleId: this.state.id\n      }).then(function (result) {\n        alert(\"Спасибо за комментаий!)\")\n        window.location.reload()\n      });\n\n    } else {\n      alert(\"Все поля должны быть заполнены\")\n    }\n  }\n\n\n  render() {\n    let status = localStorage.getItem('status') === \"god\" ? \"\" : \"create-article__non-display\" \n    return(\n      <div className=\"comments__container\">\n        <h2 className=\"comments__title\">  Комментарии: </h2>\n        {\n          this.state.comments.map(comment =>\n            <div className=\"comments__block\">\n              <h2 className=\"comments__header\">{comment.header} </h2>\n              <p className=\"comments__date\">{this.dateNow(comment.date)}</p>\n              <br/>\n              <div className=\"comments__text\"> {comment.text} </div>\n              <div className=\"comments__author\"> автор: {comment.author} </div>\n              <button className={status} onClick={() => this.delelteComment(comment)}></button>\n            </div>\n            )\n        }\n\n\n        <div className=\"newComment__container\">\n          <h3>Комментарий</h3>\n            <input className=\"form-control\" id=\"newCommentName\" placeholder=\"Как вас звать?)\"/>\n            <input className=\"newComment__header form-control\" id=\"newCommentHeader\" placeholder=\"Заголовок\"/>\n            <textarea className=\"newComment__text form-control\" id=\"newCommentText\" type=\"text\" placeholder=\"Комментарий\"/>\n            <button className=\"newComment__uppend btn btn-success\" onClick={() => this.newCommentAppend()}> Добавить </button>\t \n        </div>\n\n\n        \n      </div>\n    );\n  }\n}\n\nexport default Comments;\n"]},"metadata":{},"sourceType":"module"}