{"ast":null,"code":"import _classCallCheck from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/oem/React/ServiceOfTutorials/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import Service from'./Service';import{FindForm}from'./FindCatalog.tsx';import{multilanguage}from\"redux-multilanguage\";import{connect}from'react-redux';var service=new Service();var PRECatalog=/*#__PURE__*/function(_Component){_inherits(PRECatalog,_Component);var _super=_createSuper(PRECatalog);function PRECatalog(props){var _this;_classCallCheck(this,PRECatalog);_this=_super.call(this,props);_this.FindFormHandler=function(title){_this.setState({find:title});};var currentLanguageCode=_this.props.currentLanguageCode;var catalog=[];if(localStorage.getItem('catalog'+currentLanguageCode)){catalog=JSON.parse(localStorage.getItem('catalog'+currentLanguageCode));}_this.state={catalog:catalog,find:null,loading:false};return _this;}_createClass(PRECatalog,[{key:\"componentDidMount\",value:function componentDidMount(){var self=this;var currentLanguageCode=this.props.currentLanguageCode;var locName='catalog'+currentLanguageCode;service.getCatalog({leng:currentLanguageCode}).then(function(result){if(!localStorage.getItem(locName)||JSON.parse(localStorage.getItem(locName))!==result){self.setState({catalog:result});localStorage.setItem(locName,JSON.stringify(result));}self.setState({loading:false});});}},{key:\"componentWillUpdate\",value:function componentWillUpdate(prevProps){var self=this;var currentLanguageCode=this.props.currentLanguageCode;console.log(prevProps.currentLanguageCode,currentLanguageCode);if(prevProps.currentLanguageCode!==currentLanguageCode){var locName='catalog'+prevProps.currentLanguageCode;if(localStorage.getItem(locName)){self.setState({catalog:JSON.parse(localStorage.getItem(locName))});}service.getCatalog({leng:prevProps.currentLanguageCode}).then(function(result){self.setState({catalog:result});localStorage.setItem(locName,JSON.stringify(result));self.setState({loading:false});});}}},{key:\"catalog_finded\",value:function catalog_finded(temp){if(!this.state.find||temp[0].toLowerCase().indexOf(this.state.find.toLowerCase())!==-1){if(temp[2]&&temp[2]===\"unmod\"){return\"catalog__second-level-unmod\";}else if(temp[2]&&temp[2]===\"noDisplay\"){return\"catalog__second-level-delete\";}else{return\"catalog_second-level\";}}else{return\"admin__nonDisplay\";}}},{key:\"catalogFindGlobal\",value:function catalogFindGlobal(temp){if(!this.state.find){return\"catalog_global-level\";}else if(temp.join(\" \").toLowerCase().indexOf(this.state.find.toLowerCase())!==-1){return\"catalog_global-level\";}else{return\"admin__nonDisplay\";}}},{key:\"catalogFindFirst\",value:function catalogFindFirst(temp){if(!this.state.find){return\"catalog_first-level\";}else if(temp.join(\" \").toLowerCase().indexOf(this.state.find.toLowerCase())!==-1){return\"catalog_first-level\";}else{return\"admin__nonDisplay\";}}},{key:\"modInfo\",value:function modInfo(second){if(second[2]&&second[2]===\"unmod\"){return\" (На проверке)\";}else if(second[2]&&second[2]===\"noDisplay\"){}}},{key:\"displayList\",value:function displayList(first){var _this2=this;return first.map(function(second){return/*#__PURE__*/React.createElement(\"div\",{key:second,className:_this2.catalog_finded(second)},/*#__PURE__*/React.createElement(Link,{to:\"/Article/\"+second[1]},second[0]),_this2.modInfo(second),/*#__PURE__*/React.createElement(\"div\",{className:\"catalog__reit\"},\"(\"+second[3]+\")\"));});}},{key:\"render\",value:function render(){var _this3=this;var _this$props=this.props,strings=_this$props.strings,currentLanguageCode=_this$props.currentLanguageCode;if(this.state.loading){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"cssload-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"cssload-zenith\"})));}else return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"catalog\"},/*#__PURE__*/React.createElement(\"h1\",null,\" \",strings[\"catalog\"],\" \"),/*#__PURE__*/React.createElement(FindForm,{onAdd:this.FindFormHandler,strings:strings[\"find\"]}),/*#__PURE__*/React.createElement(\"div\",{className:\"catalog__container\"},this.state.catalog.map(function(global){return/*#__PURE__*/React.createElement(\"div\",{key:global,className:_this3.catalogFindGlobal(global)},/*#__PURE__*/React.createElement(\"h2\",null,global[0]),global.slice(1).map(function(first){return/*#__PURE__*/React.createElement(\"div\",{key:first,className:_this3.catalogFindFirst(first)},/*#__PURE__*/React.createElement(\"h4\",null,first[0]),_this3.displayList(first[1]));}));}))));}}]);return PRECatalog;}(Component);var Catalog=connect()(multilanguage(PRECatalog));export default Catalog;","map":{"version":3,"sources":["/home/oem/React/ServiceOfTutorials/frontend/src/Catalog.tsx"],"names":["React","Component","Link","Service","FindForm","multilanguage","connect","service","PRECatalog","props","FindFormHandler","title","setState","find","currentLanguageCode","catalog","localStorage","getItem","JSON","parse","state","loading","self","locName","getCatalog","leng","then","result","setItem","stringify","prevProps","console","log","temp","toLowerCase","indexOf","join","second","first","map","catalog_finded","modInfo","strings","global","catalogFindGlobal","slice","catalogFindFirst","displayList","Catalog"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react';\n\nimport { Link } from 'react-router-dom';\n\n\nimport  Service  from  './Service';\nimport { FindForm } from './FindCatalog.tsx';\nimport { multilanguage, changeLanguage, loadLanguages} from \"redux-multilanguage\";\nimport  { connect } from 'react-redux'\n\nconst  service  =  new  Service();\n\ninterface ParentState {\n  find:string;\n  catalog:any[];\n  loading:boolean;\n}\n\n\nclass PRECatalog extends Component<{}, ParentState>{\n  \n  constructor(props) {\n    super(props);\n    const { currentLanguageCode } = this.props;\n    \n    let catalog : any [] = []\n    if(localStorage.getItem('catalog' + currentLanguageCode)){\n      catalog = JSON.parse(localStorage.getItem('catalog' + currentLanguageCode))\n    }\n    this.state = {\n      catalog: catalog,\n      find: null,\n      loading: false\n    }\n  }\n  componentDidMount(){\n    var  self  =  this;\n    const { currentLanguageCode } = this.props;\n    let locName = 'catalog' + currentLanguageCode\n    service.getCatalog({leng: currentLanguageCode}).then(function (result) {\n      if(!localStorage.getItem(locName) \n        || JSON.parse(localStorage.getItem(locName)) !== result){\n        self.setState({ catalog: result })\n        localStorage.setItem(locName, JSON.stringify(result))\n      }\n      self.setState({ loading: false })\n    });\n  }\n  componentWillUpdate(prevProps) {\n    var  self  =  this;\n    const { currentLanguageCode } = this.props;\n    console.log(prevProps.currentLanguageCode , currentLanguageCode)\n    if(prevProps.currentLanguageCode !== currentLanguageCode){\n      let locName = 'catalog' + prevProps.currentLanguageCode\n      if(localStorage.getItem(locName)){\n        self.setState({ catalog: JSON.parse(localStorage.getItem(locName))})\n      }\n      service.getCatalog({leng: prevProps.currentLanguageCode}).then(function (result) {\n        \n          self.setState({ catalog: result })\n          localStorage.setItem(locName, JSON.stringify(result))\n        \n        self.setState({ loading: false })\n      });\n    }\n  }\n\n  catalog_finded(temp) {\n\n    if (!this.state.find \n      || temp[0].toLowerCase().indexOf(this.state.find.toLowerCase()) !== -1){\n        if (temp[2] && temp[2] === \"unmod\") {\n          return \"catalog__second-level-unmod\"\n        } else if (temp[2] && temp[2] === \"noDisplay\") {\n          return \"catalog__second-level-delete\"\n        } else {\n          return \"catalog_second-level\"\n        }\n    } else {\n      return \"admin__nonDisplay\"\n    }\n  }\n\n  catalogFindGlobal (temp) {\n    if (!this.state.find){\n      return \"catalog_global-level\"\n    } else if(temp.join(\" \").toLowerCase().indexOf(this.state.find.toLowerCase()) !== -1) {\n      return \"catalog_global-level\"\n    } else {\n      return \"admin__nonDisplay\"\n    }\n    \n  }\n  catalogFindFirst (temp) {\n    if (!this.state.find){\n      return \"catalog_first-level\"\n    } else if(temp.join(\" \").toLowerCase().indexOf(this.state.find.toLowerCase()) !== -1) {\n      return \"catalog_first-level\"\n    } else {\n      return \"admin__nonDisplay\"\n    }\n    \n  }\n\n\n  modInfo(second) {\n    if(second[2] && second[2] === \"unmod\"){\n      return \" (На проверке)\"\n    } else if(second[2] && second[2] === \"noDisplay\"){}\n  }  \n  displayList(first){\n    return( \n      first.map( second  =>\n        <div key={second} className={this.catalog_finded(second)}>\n          <Link\n          to={\"/Article/\"+second[1]}>{second[0]}</Link>\n          {this.modInfo(second)}\n          <div className=\"catalog__reit\" >{\"(\"+second[3]+\")\"}</div>\n          \n        </div>\n      )\n    )\n  }\n  FindFormHandler = ( title: string ) => {\n    this.setState({ find: title })\n  }\n  \n  render() {\n    const { strings, currentLanguageCode } = this.props;\n    if (this.state.loading) {\n      return (\n        <>\n        <div className=\"cssload-container\">\n            <div className=\"cssload-zenith\"></div>\n        </div>\n        </>\n      )\n    \n    } else return(   \n      <>\n      <div className=\"catalog\">\n\n        <h1> {strings[\"catalog\"]} </h1>\n          <FindForm onAdd={this.FindFormHandler} strings={strings[\"find\"]}/>\n          <div className=\"catalog__container\">\n          { \n            this.state.catalog.map( global  =>\n              <div key={global} className={this.catalogFindGlobal(global)}>\n                <h2 >{global[0]}</h2>\n                { \n                  global.slice(1).map( first  =>\n                    <div key={first} className={this.catalogFindFirst(first)}>\n                      <h4>{first[0]}</h4>\n                      {this.displayList(first[1])}\n                    </div>\n                  )\n                }\n              </div>\n            )\n          }\n          </div>\n\n        \n      </div>\n      </>\n    );\n  }\n}\nconst Catalog = connect()(multilanguage(PRECatalog));\nexport default Catalog;"]},"metadata":{},"sourceType":"module"}